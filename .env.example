# ================================
# AI服务配置 - 大语言模型和API服务设置
# ================================

# 大语言模型服务商选择
LLM_PROVIDER=deepseek                            # 服务商选择(openai-OpenAI, deepseek-DeepSeek)

# OpenAI API配置 - 当LLM_PROVIDER=openai时使用
OPENAI_API_KEY=your_openai_api_key_here          # OpenAI API密钥
OPENAI_BASE_URL=https://api.openai.com/v1        # OpenAI API基础URL
OPENAI_MODEL=gpt-3.5-turbo-16k                   # OpenAI模型名称(gpt-3.5-turbo, gpt-4等)

# DeepSeek API配置 - 当LLM_PROVIDER=deepseek时使用
DEEPSEEK_API_KEY=your_deepseek_api_key_here      # DeepSeek API密钥
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1    # DeepSeek API基础URL
DEEPSEEK_MODEL=deepseek-chat                     # DeepSeek模型名称

# 通用LLM配置 - 适用于所有LLM服务商
LLM_MAX_TOKENS=500                               # 单次请求最大token数
LLM_COOLDOWN_SECONDS=60                          # 请求冷却时间(秒)
LLM_MAX_REQUESTS=90                              # 每分钟最大请求数
LLM_TEMPERATURE=0.7                              # 生成温度(0-2,越高越随机)

# ================================
# LiblibAI图像生成服务配置 - AI绘画服务设置
# ================================

# LiblibAI API认证信息
LIBLIB_ACCESS_KEY=your_liblib_access_key_here    # LiblibAI访问密钥
LIBLIB_SECRET_KEY=your_liblib_secret_key_here    # LiblibAI秘密密钥
LIBLIB_BASE_URL=https://openapi.liblibai.cloud   # LiblibAI API基础URL
LIBLIB_ENABLED=true                              # 是否启用LiblibAI服务(true/false)

# LiblibAI请求和重试配置
LIBLIB_TIMEOUT=300                               # 请求超时时间(秒)
LIBLIB_MAX_RETRIES=3                             # 最大重试次数
LIBLIB_RETRY_DELAY=5                             # 重试间隔时间(秒)
LIBLIB_MAX_WAIT_TIME=600                         # 最大等待时间(秒)
LIBLIB_STATUS_CHECK_INTERVAL=10                  # 状态检查间隔(秒)

# LiblibAI提示词配置
LIBLIB_TRIGGER_WORDS=masterpiece, best quality, highly detailed  # 触发词(提升图像质量)
LIBLIB_NEGATIVE_PROMPT=lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry  # 负面提示词

# F.1文生图默认配置 - F.1是LiblibAI的专业绘画模型
F1_DEFAULT_WIDTH=540                             # 生成图像宽度(像素)
F1_DEFAULT_HEIGHT=960                            # 生成图像高度(像素)
F1_DEFAULT_STEPS=20                              # 采样步数(越高质量越好但速度越慢)
F1_DEFAULT_IMG_COUNT=1                           # 单次生成图片数量(1-4)
F1_DEFAULT_RESTORE_FACES=false                   # 是否启用面部修复(true/false)
F1_DEFAULT_SEED=-1                               # 随机种子(-1为随机,固定数字可复现结果)

# F.1高级参数配置 - 影响生成质量和风格的高级设置
F1_DEFAULT_CFG_SCALE=3.5                         # CFG引导强度(1-20,越高越严格遵循提示词)
F1_DEFAULT_CLIP_SKIP=2                           # CLIP跳过层数(1-12,影响艺术风格)
F1_DEFAULT_SAMPLER=1                             # 采样器类型(1-多种算法可选)
F1_DEFAULT_RANDN_SOURCE=0                        # 随机数源(0-GPU,1-CPU,影响随机性)

# F.1模板配置 - 预设的参数模板
F1_DEFAULT_TEMPLATE_UUID=6f7c4652458d4802969f8d089cf5b91f  # F.1模型的默认参数模板ID

# F.1 AdditionalNetwork (LoRA) 配置 - LoRA模型增强功能
F1_DEFAULT_ADDITIONAL_NETWORK_ENABLED=true       # 是否启用LoRA网络(true-启用,false-禁用)
F1_DEFAULT_ADDITIONAL_NETWORK_MODEL_ID=your_lora_model_id_here  # LoRA模型ID(替换为您的LoRA模型UUID)
F1_DEFAULT_ADDITIONAL_NETWORK_WEIGHT=1.0         # LoRA权重(0.1-2.0,控制LoRA效果强度)

# F.1高分辨率修复配置 - 用于生成更高分辨率的图像
F1_DEFAULT_HIRES_STEPS=20                        # 高分辨率修复的采样步数
F1_DEFAULT_HIRES_DENOISING_STRENGTH=0.75         # 高分辨率修复的去噪强度(0-1)
F1_DEFAULT_UPSCALER=16                           # 放大算法类型(不同算法有不同效果)
F1_DEFAULT_HIRES_RESIZED_WIDTH=1080              # 高分辨率修复后的宽度
F1_DEFAULT_HIRES_RESIZED_HEIGHT=1920             # 高分辨率修复后的高度

# LiblibAI通用生成参数 - 用于非F.1模型的默认设置
LIBLIB_DEFAULT_STEPS=20                          # 通用模型的默认采样步数
LIBLIB_DEFAULT_WIDTH=1024                        # 通用模型的默认宽度
LIBLIB_DEFAULT_HEIGHT=1024                       # 通用模型的默认高度

# ================================
# Azure语音服务配置 - 文本转语音(TTS)服务设置
# ================================

# Azure语音服务认证信息
AZURE_SPEECH_KEY=your_azure_speech_key_here      # Azure语音服务API密钥
AZURE_SPEECH_REGION=eastasia                     # Azure服务区域(eastasia-东亚)

# 语音合成配置 - 控制生成语音的特性
AZURE_VOICE_NAME=zh-CN-YunxiaNeural              # 语音模型名称(中文女声-云夏)
AZURE_VOICE_STYLE=calm                           # 语音风格(calm-平静,cheerful-愉快等)
AZURE_VOICE_ROLE=YoungAdultMale                  # 语音角色(YoungAdultMale-年轻成年男性)
AZURE_VOICE_RATE=+10%                            # 语速调节(+/-百分比,+10%表示加快10%)
AZURE_VOICE_VOLUME=+30%                          # 音量调节(+/-百分比,+30%表示增大30%)
AZURE_VOICE_PITCH=+0Hz                           # 音调调节(+/-Hz,+0Hz表示不调节)

# ================================
# Stable Diffusion基础配置 - 本地SD服务设置
# 支持采样器: Euler a, DPM++ 2M Karras等
# ================================

# Stable Diffusion服务连接配置
SD_API_URL=http://localhost:7860/                # SD WebUI API地址

# 基础生成参数
SD_STEPS=20                                      # 采样步数(10-150,越高质量越好)
SD_CFG_SCALE=7                                   # CFG引导强度(1-30,控制对提示词的遵循程度)
SD_SAMPLER_NAME=Euler a                          # 采样器名称(Euler a, DPM++ 2M Karras等)
SD_BATCH_SIZE=1                                  # 批次大小(同时生成的图片数量)
SD_SEED=-1                                       # 随机种子(固定数字可复现结果)

# ================================
# Stable Diffusion高分辨率配置 - 高分辨率修复设置
# ================================

# 高分辨率修复开关和基础设置
SD_ENABLE_HR=false                               # 是否启用高分辨率修复(true/false)
SD_DENOISING_STRENGTH=0.7                        # 去噪强度(0-1,越高变化越大)
SD_FIRSTPHASE_WIDTH=512                          # 第一阶段生成宽度(像素)
SD_FIRSTPHASE_HEIGHT=512                         # 第一阶段生成高度(像素)

# 高分辨率放大设置
SD_HR_SCALE=2                                    # 高分辨率放大倍数(1.1-4.0)
SD_HR_UPSCALER=Latent                            # 放大算法(Latent,ESRGAN,Real-ESRGAN等)
SD_HR_SECOND_PASS_STEPS=0                        # 二次处理步数(0表示使用默认值)
SD_HR_RESIZE_X=0                                 # 目标宽度(0表示自动计算)
SD_HR_RESIZE_Y=0                                 # 目标高度(0表示自动计算)

# ================================
# Stable Diffusion其他配置 - 面部修复和平铺设置
# ================================

SD_RESTORE_FACES=false                           # 是否启用面部修复(true/false)
SD_TILING=false                                  # 是否启用平铺模式(true/false)

# ================================
# 负面提示词配置 - 用于避免不想要的图像特征
# ================================

# 详细负面提示词 - 避免低质量、解剖错误、不当内容等
SD_NEGATIVE_PROMPT=lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry

# ================================
# ADetailer配置 - 自动面部和手部细节增强
# ================================

SD_ADETAILER_ENABLED=false                       # 是否启用ADetailer自动细节增强(true/false)
SD_ADETAILER_FACE_MODEL=face_yolov8n.pt          # 面部检测模型文件(YOLO v8 nano版本)
SD_ADETAILER_HAND_MODEL=hand_yolov8n.pt          # 手部检测模型文件(YOLO v8 nano版本)

# ================================
# LoRA模型配置 - 低秩适应模型设置
# LoRA可以在不改变基础模型的情况下添加特定风格或特征
# ================================

# LoRA模型预设配置 - 预定义的LoRA模型组合
# 格式: <lora:模型名称:权重值>, 权重值范围0-2,通常0.5-1.5效果最佳
LORA_MODEL_0=                                    # 预留插槽0
LORA_MODEL_1=                                    # 预留插槽1
LORA_MODEL_2=                                    # 预留插槽2
LORA_MODEL_3=                                    # 预留插槽3
LORA_MODEL_4=                                    # 预留插槽4
LORA_MODEL_5=                                    # 预留插槽5
LORA_MODEL_6=                                    # 预留插槽6
LORA_MODEL_7=                                    # 预留插槽7
LORA_MODEL_8=                                    # 预留插槽8
LORA_MODEL_9=                                    # 预留插槽9

# LoRA模型动态配置 - 用于程序动态设置LoRA模型
SD_LORA_MODELS=                                  # LoRA模型名称列表(如: model1.safetensors,model2.safetensors)
SD_LORA_WEIGHTS=                                 # 对应的权重值列表(如: 0.8,0.6,取值范围0-2)

# ================================
# 项目路径配置 - 定义项目各目录的绝对路径和相对路径
# ================================

# 核心项目路径
PROJECT_ROOT=/path/to/your/story-flow            # 项目根目录

# 输入文件配置
INPUT_MD_FILE=data/input/input.md                # 输入的Markdown文件路径
INPUT_DIR=data/input                             # 输入文件目录

# 输出文件配置
OUTPUT_EXCEL_FILE=data/output/processed/txt.csv  # 处理后的文本CSV文件
OUTPUT_DIR_TXT=data/output/processed             # 文本处理输出目录
OUTPUT_DIR_IMAGE=data/output/images              # 图像生成输出目录
OUTPUT_DIR_VOICE=data/output/audio               # 语音生成输出目录
OUTPUT_DIR_VIDEO=data/output/videos              # 视频生成输出目录
OUTPUT_DIR_TEMP=data/temp                        # 临时文件目录
PARAMS_JSON_FILE=data/temp/params.json           # 参数配置JSON文件

# ================================
# 文本处理配置 - 文本分析和处理参数
# ================================

# 文本分块配置 - 用于长文本的分段处理
MAX_TOKENS_PER_CHUNK=2000                        # 每个文本块的最大token数
CHUNK_OVERLAP=200                                # 文本块之间的重叠token数
MIN_CHUNK_SIZE=100                               # 最小文本块大小(token数)

# 文本编码和语言配置
TEXT_ENCODING=utf-8                              # 文本文件编码格式
LANGUAGE=zh-CN                                   # 主要处理语言(中文简体)

# 文本分割规则配置
SENTENCE_SPLIT_PATTERN=。|！|？|\n\n              # 句子分割正则表达式(句号、感叹号、问号、双换行)

# 文本质量控制配置
PARAGRAPH_MIN_LENGTH=50                          # 段落最小长度(字符数)
SENTENCE_MIN_LENGTH=10                           # 句子最小长度(字符数)
WORD_COUNT_THRESHOLD=1000                        # 词数阈值(用于长文本检测)

# 文本处理性能配置
MIN_SENTENCE_LENGTH=10                           # 最小句子长度(字符数)
ENCODING_LIST=utf-8,gb2312,gbk,gb18030           # 支持的文本编码格式列表
MAX_WORKERS_TRANSLATION=4                        # 翻译任务最大并发数
MAX_WORKERS_IMAGE=2                              # 图像生成任务最大并发数

# 文本分割器配置 - 支持多种输入输出格式
TEXT_SPLITTER_SUPPORTED_INPUT=md,txt             # 支持的输入文件格式(Markdown,纯文本)
TEXT_SPLITTER_SUPPORTED_OUTPUT=md,txt,json       # 支持的输出文件格式(Markdown,纯文本,JSON)
TEXT_SPLITTER_DEFAULT_INPUT_FORMAT=md            # 默认输入格式(Markdown)
TEXT_SPLITTER_DEFAULT_OUTPUT_FORMAT=md           # 默认输出格式(Markdown)
TEXT_SPLITTER_CHAPTER_PATTERNS=# ,## ,### ,第.*章,Chapter  # 章节识别模式(支持Markdown标题和中英文章节)

# ================================
# 视频生成配置 - 视频编码和输出参数
# ================================

# 基础视频参数
VIDEO_FPS=30                                     # 视频帧率(每秒帧数,常用: 24,30,60)
VIDEO_DURATION=5                                 # 默认视频时长(秒)
VIDEO_RESOLUTION=1920x1080                       # 视频分辨率(1920x1080为Full HD)
VIDEO_DURATION_PER_IMAGE=3.0                     # 每张图片显示时长(秒)

# 视频编码配置
VIDEO_CODEC=libx264                              # 视频编码器(libx264为H.264编码)
VIDEO_BITRATE=5000k                              # 视频码率(5000k为5Mbps,影响画质和文件大小)
VIDEO_QUALITY=high                               # 视频质量等级(low,medium,high,ultra)
VIDEO_PRESET=medium                              # 编码预设(ultrafast,fast,medium,slow,veryslow)

# 音频编码配置
VIDEO_AUDIO_CODEC=aac                            # 音频编码器(AAC为通用音频编码)
AUDIO_BITRATE=192k                               # 音频码率(192k为高质量音频)

# 视频效果配置
VIDEO_SUBTITLE=false                             # 是否启用字幕(true/false)
VIDEO_EFFECTS=false                              # 是否启用视频特效(true/false)

# 输出格式配置
VIDEO_OUTPUT_FORMAT=mp4                          # 输出视频格式(mp4,avi,mov等)

# ================================
# 字幕配置 - 视频字幕样式和布局设置
# ================================

# 字幕开关配置
VIDEO_SUBTITLE=false                              # 是否启用字幕显示(true/false)

# 字幕字体配置
SUBTITLE_FONTSIZE=40                              # 字幕字体大小(像素,建议24-48)
SUBTITLE_FONTCOLOR=#FFFFFF                        # 字幕字体颜色(十六进制颜色码,#FFFFFF为白色)
SUBTITLE_FONT=/System/Library/Fonts/Arial.ttf    # 字体文件路径(支持ttf,ttc,otf格式)

# 字幕描边配置 - 增强字幕可读性
SUBTITLE_STROKE_COLOR=#000000                     # 字幕描边颜色(#000000为黑色,增强对比度)
SUBTITLE_STROKE_WIDTH=2                           # 字幕描边宽度(像素,1-4为常用范围)

# 字幕位置和对齐
SUBTITLE_ALIGN=center                             # 字幕对齐方式(left-左对齐,center-居中,right-右对齐)
SUBTITLE_POSITION=144                             # 字幕垂直位置(像素,距离底部的距离)

# 字幕文本控制
SUBTITLE_MAX_CHARS_PER_LINE=40                    # 每行最大字符数(中文按2个字符计算,避免字幕过长)
SUBTITLE_MAX_LINES=2                              # 最大显示行数(避免字幕遮挡过多画面)
SUBTITLE_DURATION_BUFFER=0.5                      # 字幕持续时间缓冲(秒,延长显示时间便于阅读)

# ================================
# 调试和日志配置 - 应用程序调试和日志记录设置
# ================================

# 调试模式配置
DEBUG=false                                      # 是否启用调试模式(true/false,影响错误显示详细程度)

# 日志级别和格式配置
LOG_LEVEL=INFO                                   # 日志级别(DEBUG,INFO,WARNING,ERROR,CRITICAL)
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s  # 日志格式模板
LOG_ENCODING=utf-8                               # 日志文件编码格式

# 日志文件配置
LOG_FILE=logs/app.log                            # 主日志文件路径
LOG_MAX_SIZE=10MB                                # 单个日志文件最大大小
LOG_BACKUP_COUNT=5                               # 保留的历史日志文件数量
LOG_ROTATION=daily                               # 日志轮转策略(daily-每日,weekly-每周,monthly-每月)

# 日志输出控制
ENABLE_CONSOLE_LOG=true                          # 是否启用控制台日志输出(true/false)
ENABLE_FILE_LOG=true                             # 是否启用文件日志输出(true/false)

