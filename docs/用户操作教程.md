# Story Flow ç”¨æˆ·æ“ä½œæ•™ç¨‹

## ğŸ“– æ•™ç¨‹æ¦‚è¿°

æœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç» Story Flow AIæ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ï¼Œå¸®åŠ©æ‚¨å¿«é€ŸæŒæ¡ä»æ–‡æœ¬åˆ›ä½œåˆ°è§†é¢‘ç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚æœ¬æ•™ç¨‹ä¸“æ³¨äºä¸šåŠ¡åŠŸèƒ½çš„ä½¿ç”¨ï¼Œä¸æ¶‰åŠç¯å¢ƒæ­å»ºå’Œå¼€å‘ç»†èŠ‚ã€‚

## ğŸ¯ Story Flow é¡¹ç›®ä»‹ç»

### ä»€ä¹ˆæ˜¯ Story Flowï¼Ÿ

Story Flow æ˜¯ä¸€ä¸ªå¼ºå¤§çš„AIé©±åŠ¨æ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆç³»ç»Ÿï¼Œèƒ½å¤Ÿå°†å°è¯´ã€æ•…äº‹ç­‰æ–‡æœ¬å†…å®¹è‡ªåŠ¨è½¬æ¢ä¸ºåŒ…å«AIç”Ÿæˆå›¾åƒã€çœŸå®è¯­éŸ³åˆæˆå’Œç²¾ç¾å­—å¹•çš„å®Œæ•´è§†é¢‘ä½œå“ã€‚

### ğŸŒŸ æ ¸å¿ƒä»·å€¼

- **ğŸ¤– å…¨è‡ªåŠ¨åŒ–æµæ°´çº¿** - ä¸€é”®ä»æ–‡æœ¬ç”Ÿæˆå®Œæ•´è§†é¢‘ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
- **ğŸ§  å¤šAIæ¨¡å‹é›†æˆ** - é›†æˆOpenAI GPTã€DeepSeekã€Stable Diffusionã€Azure TTSç­‰å…ˆè¿›AIæœåŠ¡
- **ğŸ¨ é«˜è´¨é‡è§†è§‰æ•ˆæœ** - ä¸“ä¸šçº§è§†é¢‘è¾“å‡ºï¼Œæ”¯æŒå¤šç§é£æ ¼å’Œç‰¹æ•ˆ
- **ğŸ”§ é«˜åº¦å¯é…ç½®** - çµæ´»çš„å‚æ•°è°ƒæ•´ï¼Œæ»¡è¶³ä¸åŒåˆ›ä½œéœ€æ±‚
- **ğŸ“± ç”¨æˆ·å‹å¥½** - ç®€å•æ˜“ç”¨çš„æ“ä½œç•Œé¢ï¼Œé€‚åˆå„ç§æŠ€èƒ½æ°´å¹³çš„ç”¨æˆ·

### ğŸ¬ ä¸»è¦åŠŸèƒ½ç‰¹æ€§

#### 1. æ™ºèƒ½æ–‡æœ¬å¤„ç†
- **AIæ•…äº‹ç”Ÿæˆ** - æ ¹æ®ä¸»é¢˜è‡ªåŠ¨åˆ›ä½œå®Œæ•´æ•…äº‹
- **å¤šLLMæ”¯æŒ** - æ”¯æŒOpenAI GPT-3.5/4å’ŒDeepSeekç­‰å¤§è¯­è¨€æ¨¡å‹
- **æ™ºèƒ½åˆ†æ®µ** - è‡ªåŠ¨è¯†åˆ«ç« èŠ‚å’Œæ®µè½ç»“æ„
- **å†…å®¹åˆ†æ** - AIç†è§£æ–‡æœ¬å†…å®¹å¹¶ç”Ÿæˆè§†è§‰æè¿°
- **è§’è‰²åæ›¿æ¢** - æ”¯æŒè‡ªå®šä¹‰è§’è‰²åå’ŒLoRAæ¨¡å‹æ˜ å°„
- **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­è‹±æ–‡å†…å®¹å¤„ç†

#### 2. AIå›¾åƒç”Ÿæˆ
- **Stable Diffusioné›†æˆ** - é«˜è´¨é‡AIå›¾åƒç”Ÿæˆ
- **LoRAæ¨¡å‹æ”¯æŒ** - é£æ ¼åŒ–å›¾åƒå®šåˆ¶ï¼Œæ”¯æŒç‰¹å®šè§’è‰²å’Œé£æ ¼
- **æ‰¹é‡å¤„ç†** - å¤šçº¿ç¨‹å¹¶å‘ç”Ÿæˆï¼Œæé«˜æ•ˆç‡
- **å‚æ•°å¯è°ƒ** - ä¸°å¯Œçš„ç”Ÿæˆå‚æ•°é…ç½®ï¼Œæ§åˆ¶å›¾åƒè´¨é‡å’Œé£æ ¼

#### 3. è¯­éŸ³åˆæˆ
- **Azure TTS** - å¾®è½¯è®¤çŸ¥æœåŠ¡è¯­éŸ³åˆæˆ
- **å¤šç§éŸ³è‰²** - æ”¯æŒå¤šç§ä¸­æ–‡è¯­éŸ³è§’è‰²
- **æƒ…æ„Ÿè¡¨è¾¾** - å¯é…ç½®è¯­éŸ³é£æ ¼å’Œæƒ…æ„Ÿ
- **é«˜è´¨é‡è¾“å‡º** - è‡ªç„¶æµç•…çš„è¯­éŸ³æ•ˆæœ

#### 4. è§†é¢‘åˆ¶ä½œ
- **è‡ªåŠ¨åˆæˆ** - å›¾åƒã€è¯­éŸ³ã€å­—å¹•è‡ªåŠ¨åˆæˆ
- **ä¸“ä¸šå­—å¹•** - å¯è‡ªå®šä¹‰å­—ä½“ã€é¢œè‰²ã€ä½ç½®
- **è§†è§‰ç‰¹æ•ˆ** - æ”¯æŒå¤šç§è§†é¢‘è½¬åœºæ•ˆæœ
- **é«˜æ¸…è¾“å‡º** - æ”¯æŒå¤šç§åˆ†è¾¨ç‡å’Œæ ¼å¼

#### 5. å¤šç« èŠ‚å¤„ç†
- **ç« èŠ‚è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«å’Œè§£æå¤šç« èŠ‚å†…å®¹
- **é¡ºåºå¤„ç†** - æŒ‰ç« èŠ‚é¡ºåºä¾æ¬¡å¤„ç†ï¼Œé¿å…å†…å®¹æ··ä¹±
- **æ™ºèƒ½æ¸…ç†** - æ¯ç« èŠ‚å¤„ç†å‰è‡ªåŠ¨æ¸…ç†ä¸Šä¸€ç« èŠ‚çš„è¾“å‡ºæ–‡ä»¶
- **è¿›åº¦è·Ÿè¸ª** - å®æ—¶æ˜¾ç¤ºç« èŠ‚å¤„ç†è¿›åº¦å’ŒçŠ¶æ€
- **æ–‡ä»¶ä¿æŠ¤** - è‡ªåŠ¨ä¿ç•™é‡è¦æ–‡ä»¶ï¼Œé¿å…è¯¯åˆ 

### ğŸ¯ åº”ç”¨åœºæ™¯

#### å†…å®¹åˆ›ä½œé¢†åŸŸ
- **ğŸ“š å°è¯´å¯è§†åŒ–** - å°†å°è¯´ç« èŠ‚è½¬æ¢ä¸ºè§†é¢‘ï¼Œå¢å¼ºé˜…è¯»ä½“éªŒ
- **ğŸ“ æ•™è‚²å†…å®¹** - åˆ¶ä½œæ•™å­¦è§†é¢‘å’Œè¯¾ä»¶ï¼Œæé«˜æ•™å­¦æ•ˆæœ
- **ğŸ“– æ•…äº‹è®²è¿°** - å„¿ç«¥æ•…äº‹ã€å¯“è¨€ç­‰çš„è§†é¢‘åŒ–å‘ˆç°
- **ğŸ¬ å†…å®¹åˆ›ä½œ** - è‡ªåª’ä½“è§†é¢‘åˆ¶ä½œï¼Œå¿«é€Ÿäº§å‡ºä¼˜è´¨å†…å®¹
- **ğŸ“± ç¤¾äº¤åª’ä½“** - çŸ­è§†é¢‘å†…å®¹ç”Ÿæˆï¼Œé€‚åˆå„ç§å¹³å°

#### å•†ä¸šåº”ç”¨
- **è¥é”€æ¨å¹¿** - äº§å“æ•…äº‹è§†é¢‘åˆ¶ä½œ
- **ä¼ä¸šåŸ¹è®­** - åŸ¹è®­ææ–™è§†é¢‘åŒ–
- **å“ç‰Œå®£ä¼ ** - å“ç‰Œæ•…äº‹è§†é¢‘åˆ¶ä½œ

#### ä¸ªäººåˆ›ä½œ
- **åˆ›æ„è¡¨è¾¾** - ä¸ªäººåˆ›æ„å’Œæƒ³æ³•çš„è§†é¢‘åŒ–
- **è®°å½•åˆ†äº«** - ç”Ÿæ´»æ•…äº‹çš„è§†é¢‘è®°å½•
- **å­¦ä¹ è¾…åŠ©** - å­¦ä¹ å†…å®¹çš„è§†é¢‘åŒ–æ•´ç†

### ğŸ”„ å·¥ä½œæµç¨‹æ¦‚è§ˆ

Story Flow çš„å®Œæ•´å·¥ä½œæµç¨‹åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š

1. **ğŸ“ æ–‡æœ¬è¾“å…¥/ç”Ÿæˆ** - è¾“å…¥ç°æœ‰æ•…äº‹æˆ–ä½¿ç”¨AIç”Ÿæˆæ–°æ•…äº‹
2. **ğŸ” æ–‡æœ¬åˆ†æ** - AIåˆ†ææ–‡æœ¬å†…å®¹ï¼Œç”Ÿæˆç« èŠ‚ç»“æ„å’Œè§†è§‰æè¿°
3. **ğŸ“Š æ•…äº‹æ¿ç”Ÿæˆ** - åˆ›å»ºè¯¦ç»†çš„æ•…äº‹æ¿CSVæ–‡ä»¶
4. **ğŸ¨ å›¾åƒç”Ÿæˆ** - æ ¹æ®æ•…äº‹æ¿ç”Ÿæˆå¯¹åº”çš„AIå›¾åƒ
5. **ğŸ™ï¸ è¯­éŸ³åˆæˆ** - å°†æ–‡æœ¬è½¬æ¢ä¸ºè‡ªç„¶è¯­éŸ³
6. **ğŸ¬ è§†é¢‘åˆæˆ** - å°†å›¾åƒã€éŸ³é¢‘å’Œå­—å¹•åˆæˆä¸ºæœ€ç»ˆè§†é¢‘

æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥å•ç‹¬æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–æµæ°´çº¿ä¸€é”®å®Œæˆå…¨éƒ¨æµç¨‹ã€‚

---

## ğŸ“‹ ä½¿ç”¨å‰å‡†å¤‡

åœ¨å¼€å§‹ä½¿ç”¨ Story Flow ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å®Œæˆäº†ç¯å¢ƒæ­å»ºå’ŒåŸºæœ¬é…ç½®ã€‚å¦‚æœè¿˜æ²¡æœ‰å®Œæˆï¼Œè¯·å‚è€ƒé¡¹ç›®çš„å®‰è£…æ–‡æ¡£ã€‚

### å¿…éœ€çš„é…ç½®æ–‡ä»¶

ä½¿ç”¨ Story Flow éœ€è¦å‡†å¤‡ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

1. **ç¯å¢ƒé…ç½®æ–‡ä»¶** (`.env`) - åŒ…å«APIå¯†é’¥å’ŒæœåŠ¡é…ç½®
2. **è§’è‰²æ˜ å°„æ–‡ä»¶** (`character_mapping.json`) - å®šä¹‰è§’è‰²åæ›¿æ¢å’ŒLoRAæ¨¡å‹
3. **è¾“å…¥æ–‡ä»¶** (`input.md`) - æ•…äº‹å†…å®¹æˆ–ç”±AIç”Ÿæˆ

æ¥ä¸‹æ¥çš„ç« èŠ‚å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é…ç½®å’Œä½¿ç”¨è¿™äº›åŠŸèƒ½ã€‚

---

## âš™ï¸ é…ç½®ç®¡ç†

### 1. ç¯å¢ƒé…ç½® (.env)

ç¯å¢ƒé…ç½®æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰å¿…éœ€çš„APIå¯†é’¥å’ŒæœåŠ¡é…ç½®ã€‚è¯·åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

âš ï¸ **å®‰å…¨æé†’**ï¼š
- `.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ç¡®ä¿å·²æ·»åŠ åˆ° `.gitignore` ä¸­
- ä¸è¦å°†åŒ…å«çœŸå®å¯†é’¥çš„ `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- å®šæœŸæ£€æŸ¥å’Œè½®æ¢APIå¯†é’¥
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†å·¥å…·ï¼ˆå¦‚ `python-decouple`ï¼‰æ¥å®‰å…¨åœ°åŠ è½½é…ç½®

```bash
# OpenAI API é…ç½®
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_BASE_URL=https://api.openai.com/v1  # å¯é€‰ï¼Œé»˜è®¤å®˜æ–¹API

# DeepSeek API é…ç½®ï¼ˆå¯é€‰ï¼‰
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# Stable Diffusion API é…ç½®
SD_API_BASE_URL=http://127.0.0.1:7860  # æœ¬åœ°SD WebUIåœ°å€
# æˆ–ä½¿ç”¨äº‘ç«¯æœåŠ¡
# SD_API_BASE_URL=https://your-sd-service.com

# Azure è¯­éŸ³æœåŠ¡é…ç½®
AZURE_SPEECH_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
AZURE_SPEECH_REGION=eastus  # å¦‚ï¼šeastus, westus2

# å¯é€‰é…ç½®
LOG_LEVEL=INFO  # æ—¥å¿—çº§åˆ«ï¼šDEBUG, INFO, WARNING, ERROR
MAX_WORKERS=4   # å¹¶å‘å¤„ç†çº¿ç¨‹æ•°
```

#### ğŸ”‘ APIå¯†é’¥è·å–æŒ‡å—

**OpenAI API**
1. è®¿é—® [OpenAI Platform](https://platform.openai.com/)
2. æ³¨å†Œè´¦å·å¹¶å®ŒæˆéªŒè¯
3. åœ¨ API Keys é¡µé¢åˆ›å»ºæ–°çš„APIå¯†é’¥
4. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ä½™é¢
5. **é‡è¦**ï¼šå¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æˆ–å…¬å¼€åˆ†äº«

**DeepSeek API**ï¼ˆå¯é€‰ï¼‰
1. è®¿é—® [DeepSeek Platform](https://platform.deepseek.com/)
2. æ³¨å†Œè´¦å·å¹¶è·å–APIå¯†é’¥
3. ç›¸æ¯”OpenAIæ›´ç»æµå®æƒ 
4. **æ³¨æ„**ï¼šåŒæ ·éœ€è¦å¦¥å–„ä¿ç®¡å¯†é’¥

**Azure è¯­éŸ³æœåŠ¡**
1. è®¿é—® [Azure Portal](https://portal.azure.com/)
2. åˆ›å»ºã€Œè¯­éŸ³æœåŠ¡ã€èµ„æº
3. è·å–å¯†é’¥å’ŒåŒºåŸŸä¿¡æ¯
4. å…è´¹å±‚æ¯æœˆæä¾›50ä¸‡å­—ç¬¦é¢åº¦
5. **å®‰å…¨æé†’**ï¼šå®šæœŸè½®æ¢å¯†é’¥ï¼Œç›‘æ§ä½¿ç”¨æƒ…å†µ

**Stable Diffusion**
- **æœ¬åœ°éƒ¨ç½²**ï¼šå®‰è£… [AUTOMATIC1111 WebUI](https://github.com/AUTOMATIC1111/stable-diffusion-webui)
- **äº‘ç«¯æœåŠ¡**ï¼šä½¿ç”¨ Replicateã€RunPod ç­‰äº‘ç«¯SDæœåŠ¡

### 2. è§’è‰²æ˜ å°„é…ç½® (character_mapping.json)

è§’è‰²æ˜ å°„æ–‡ä»¶ç”¨äºè‡ªå®šä¹‰è§’è‰²åç§°å’Œå¯¹åº”çš„LoRAæ¨¡å‹ï¼Œå®ç°è§’è‰²ä¸€è‡´æ€§çš„å›¾åƒç”Ÿæˆã€‚

#### ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

```json
{
  "è§’è‰²å1": {
    "lora_model": "lora_model_name",
    "lora_weight": 0.8,
    "replacement_name": "æ›¿æ¢åçš„è§’è‰²å",
    "description": "è§’è‰²æè¿°"
  },
  "è§’è‰²å2": {
    "lora_model": "another_lora_model",
    "lora_weight": 0.7,
    "replacement_name": "å¦ä¸€ä¸ªè§’è‰²å",
    "description": "å¦ä¸€ä¸ªè§’è‰²çš„æè¿°"
  }
}
```

#### ğŸ­ é…ç½®ç¤ºä¾‹

```json
{
  "å°æ˜": {
    "lora_model": "boy_character_v1",
    "lora_weight": 0.8,
    "replacement_name": "Alex",
    "description": "ä¸€ä¸ªèªæ˜æ´»æ³¼çš„ç”·å­©"
  },
  "å°çº¢": {
    "lora_model": "girl_character_v2",
    "lora_weight": 0.7,
    "replacement_name": "Emma",
    "description": "ä¸€ä¸ªæ¸©æŸ”å–„è‰¯çš„å¥³å­©"
  },
  "è€å¸ˆ": {
    "lora_model": "teacher_model",
    "lora_weight": 0.6,
    "replacement_name": "Mr. Johnson",
    "description": "ä¸€ä½ç»éªŒä¸°å¯Œçš„æ•™å¸ˆ"
  }
}
```

#### ğŸ”§ å‚æ•°è¯´æ˜

- **lora_model**: LoRAæ¨¡å‹åç§°ï¼Œéœ€è¦åœ¨SD WebUIä¸­å·²å®‰è£…
- **lora_weight**: LoRAæƒé‡ï¼ŒèŒƒå›´0.1-1.0ï¼Œæ§åˆ¶é£æ ¼å¼ºåº¦
- **replacement_name**: æ›¿æ¢åçš„è§’è‰²åï¼Œç”¨äºå›¾åƒç”Ÿæˆæç¤ºè¯
- **description**: è§’è‰²æè¿°ï¼Œå¸®åŠ©ç”Ÿæˆæ›´å‡†ç¡®çš„å›¾åƒ

#### ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **LoRAæ¨¡å‹é€‰æ‹©**ï¼šé€‰æ‹©ä¸è§’è‰²ç‰¹å¾åŒ¹é…çš„LoRAæ¨¡å‹
2. **æƒé‡è°ƒèŠ‚**ï¼šè¾ƒé«˜æƒé‡(0.8-1.0)é£æ ¼æ›´æ˜æ˜¾ï¼Œè¾ƒä½æƒé‡(0.4-0.6)æ›´è‡ªç„¶
3. **åç§°æ›¿æ¢**ï¼šä½¿ç”¨è‹±æ–‡åç§°é€šå¸¸èƒ½è·å¾—æ›´å¥½çš„å›¾åƒç”Ÿæˆæ•ˆæœ
4. **æè¿°ä¼˜åŒ–**ï¼šè¯¦ç»†çš„è§’è‰²æè¿°æœ‰åŠ©äºç”Ÿæˆä¸€è‡´æ€§æ›´å¥½çš„å›¾åƒ

### 3. è¾“å…¥æ–‡ä»¶å‡†å¤‡ (input.md)

è¾“å…¥æ–‡ä»¶æ˜¯æ•…äº‹å†…å®¹çš„è½½ä½“ï¼Œæ”¯æŒMarkdownæ ¼å¼ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–å†™æˆ–ä½¿ç”¨AIç”Ÿæˆã€‚

#### ğŸ“„ æ–‡ä»¶æ ¼å¼è¦æ±‚

```markdown
# æ•…äº‹æ ‡é¢˜

## ç¬¬ä¸€ç«  ç« èŠ‚æ ‡é¢˜

è¿™é‡Œæ˜¯ç¬¬ä¸€ç« çš„å†…å®¹ã€‚å¯ä»¥åŒ…å«å¯¹è¯ã€æè¿°ã€åŠ¨ä½œç­‰ã€‚

"ä½ å¥½ï¼Œä¸–ç•Œï¼"å°æ˜å…´å¥‹åœ°è¯´é“ã€‚

å°çº¢å¾®ç¬‘ç€å›åº”ï¼š"ä½ å¥½ï¼Œå°æ˜ï¼"

## ç¬¬äºŒç«  å¦ä¸€ä¸ªç« èŠ‚

ç»§ç»­æ•…äº‹çš„å‘å±•...
```

#### ğŸ“‹ æ ¼å¼è§„èŒƒ

1. **ç« èŠ‚æ ‡è¯†**ï¼šä½¿ç”¨ `## ç¬¬Xç« ` æˆ– `## Chapter X` æ ¼å¼
2. **å¯¹è¯æ ¼å¼**ï¼šä½¿ç”¨å¼•å·åŒ…å›´å¯¹è¯å†…å®¹
3. **è§’è‰²åç§°**ï¼šç¡®ä¿è§’è‰²åä¸ `character_mapping.json` ä¸­çš„é…ç½®ä¸€è‡´
4. **æ®µè½åˆ†éš”**ï¼šä½¿ç”¨ç©ºè¡Œåˆ†éš”ä¸åŒæ®µè½
5. **ç‰¹æ®Šæ ‡è®°**ï¼šå¯ä»¥ä½¿ç”¨ `**ç²—ä½“**` å’Œ `*æ–œä½“*` ç­‰Markdownæ ¼å¼

#### ğŸ’¡ å†…å®¹ç¼–å†™å»ºè®®

1. **åœºæ™¯æè¿°**ï¼šè¯¦ç»†æè¿°åœºæ™¯ç¯å¢ƒï¼Œæœ‰åŠ©äºç”Ÿæˆå‡†ç¡®çš„èƒŒæ™¯å›¾åƒ
2. **è§’è‰²åŠ¨ä½œ**ï¼šæ˜ç¡®æè¿°è§’è‰²çš„åŠ¨ä½œå’Œè¡¨æƒ…
3. **æƒ…æ„Ÿè¡¨è¾¾**ï¼šé€šè¿‡å¯¹è¯å’Œæè¿°ä¼ è¾¾è§’è‰²æƒ…æ„Ÿ
4. **èŠ‚å¥æ§åˆ¶**ï¼šåˆç†å®‰æ’æƒ…èŠ‚å‘å±•èŠ‚å¥
5. **è§†è§‰å…ƒç´ **ï¼šå¤šä½¿ç”¨å…·æœ‰è§†è§‰å†²å‡»åŠ›çš„æè¿°

#### ğŸ¯ ä¼˜åŒ–æŠ€å·§

- **é•¿åº¦æ§åˆ¶**ï¼šæ¯ä¸ªæ®µè½å»ºè®®50-200å­—ï¼Œä¾¿äºè¯­éŸ³åˆæˆå’Œè§†é¢‘èŠ‚å¥
- **å¯¹è¯å¹³è¡¡**ï¼šå¯¹è¯å’Œå™è¿°ä¿æŒé€‚å½“æ¯”ä¾‹
- **åœºæ™¯å˜åŒ–**ï¼šé€‚å½“çš„åœºæ™¯è½¬æ¢å¢åŠ è§†è§‰ä¸°å¯Œæ€§
- **è§’è‰²ä¸€è‡´æ€§**ï¼šä¿æŒè§’è‰²æ€§æ ¼å’Œè¡Œä¸ºçš„ä¸€è‡´æ€§

---

## ğŸ¤– AIæ•…äº‹ç”ŸæˆåŠŸèƒ½

Story Flow å†…ç½®å¼ºå¤§çš„AIæ•…äº‹ç”ŸæˆåŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®æ‚¨æä¾›çš„ä¸»é¢˜è‡ªåŠ¨åˆ›ä½œå®Œæ•´çš„æ•…äº‹å†…å®¹ã€‚è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆéœ€è¦å¿«é€Ÿåˆ›ä½œå†…å®¹æˆ–å¯»æ‰¾åˆ›ä½œçµæ„Ÿçš„ç”¨æˆ·ã€‚

### ğŸš€ å¯åŠ¨AIæ•…äº‹ç”Ÿæˆ

#### æ–¹æ³•ä¸€ï¼šäº¤äº’å¼èœå•å¯åŠ¨

1. **å¯åŠ¨ç¨‹åº**
   ```bash
   uv run main.py
   ```

2. **é€‰æ‹©æ•…äº‹ç”Ÿæˆé€‰é¡¹**
   ```
   ========================================
   Story Flow - AIæ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆç³»ç»Ÿ
   ========================================
   
   è¯·é€‰æ‹©æ“ä½œï¼š
   1. è‡ªåŠ¨è¿è¡Œå®Œæ•´æµæ°´çº¿
   2. ç”Ÿæˆæ–°æ•…äº‹ (AIåˆ›ä½œ)  â† é€‰æ‹©æ­¤é¡¹
   3. åˆ†å‰²æ–‡æœ¬ä¸ºç« èŠ‚
   4. ç”Ÿæˆæ•…äº‹æ¿
   5. ç”Ÿæˆå›¾åƒ
   6. ç”ŸæˆéŸ³é¢‘
   7. ç”Ÿæˆè§†é¢‘
   8. é€€å‡º
   
   è¯·è¾“å…¥é€‰é¡¹ (1-8): 2
   ```

#### æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œç›´æ¥å¯åŠ¨

```bash
# ç›´æ¥å¯åŠ¨æ•…äº‹ç”Ÿæˆæ¨¡å—
uv run main.py --module story_generator

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m story_generator
```

### ğŸ“ æ•…äº‹ä¸»é¢˜è¾“å…¥

å¯åŠ¨æ•…äº‹ç”ŸæˆåŠŸèƒ½åï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥æ•…äº‹ä¸»é¢˜ï¼š

```
è¯·è¾“å…¥æ•…äº‹ä¸»é¢˜æˆ–æ¦‚è¦ï¼ˆæŒ‰å›è½¦ç¡®è®¤ï¼‰:
> ä¸€ä¸ªå…³äºå‹è°Šå’Œå†’é™©çš„ç«¥è¯æ•…äº‹
```

#### ğŸ’¡ ä¸»é¢˜è¾“å…¥æŠ€å·§

**ä¼˜ç§€ä¸»é¢˜ç¤ºä¾‹ï¼š**
- "ä¸€ä¸ªå…³äºå‹‡æ•¢å°å¥³å­©æ‹¯æ•‘æ£®æ—çš„ç¯ä¿æ•…äº‹"
- "ä¸¤ä¸ªå¥½æœ‹å‹åœ¨ç¥ç§˜å›¾ä¹¦é¦†ä¸­çš„å¥‡å¹»å†’é™©"
- "ä¸€åªä¼šè¯´è¯çš„çŒ«å’ªå¸®åŠ©ä¸»äººæ‰¾å›è‡ªä¿¡çš„æ¸©é¦¨æ•…äº‹"
- "æœªæ¥ä¸–ç•Œä¸­æœºå™¨äººä¸äººç±»å’Œè°å…±å¤„çš„ç§‘å¹»æ•…äº‹"

**ä¸»é¢˜æè¿°å»ºè®®ï¼š**
1. **æ˜ç¡®ä¸»è§’**ï¼šæŒ‡å®šä¸»è¦è§’è‰²çš„ç‰¹å¾
2. **è®¾å®šèƒŒæ™¯**ï¼šæè¿°æ•…äº‹å‘ç”Ÿçš„ç¯å¢ƒæˆ–æ—¶ä»£
3. **æ ¸å¿ƒå†²çª**ï¼šç®€è¿°æ•…äº‹çš„ä¸»è¦çŸ›ç›¾æˆ–æŒ‘æˆ˜
4. **æƒ…æ„ŸåŸºè°ƒ**ï¼šè¡¨æ˜æ•…äº‹çš„æƒ…æ„Ÿè‰²å½©ï¼ˆæ¸©é¦¨ã€å†’é™©ã€æ‚¬ç–‘ç­‰ï¼‰
5. **ç›®æ ‡å—ä¼—**ï¼šè€ƒè™‘æ•…äº‹é€‚åˆçš„å¹´é¾„ç¾¤ä½“

**é¿å…çš„ä¸»é¢˜ç±»å‹ï¼š**
- è¿‡äºæŠ½è±¡æˆ–å“²å­¦æ€§çš„ä¸»é¢˜
- åŒ…å«æš´åŠ›ã€ææ€–æˆ–ä¸é€‚å®œå†…å®¹çš„ä¸»é¢˜
- è¿‡äºå¤æ‚æˆ–éœ€è¦å¤§é‡èƒŒæ™¯çŸ¥è¯†çš„ä¸»é¢˜

### ğŸ¯ AIç”Ÿæˆè¿‡ç¨‹

è¾“å…¥ä¸»é¢˜åï¼ŒAIå°†å¼€å§‹ç”Ÿæˆæ•…äº‹ï¼š

```
æ­£åœ¨ç”Ÿæˆæ•…äº‹ï¼Œè¯·ç¨å€™...
ä½¿ç”¨æ¨¡å‹: gpt-3.5-turbo
ä¸»é¢˜: ä¸€ä¸ªå…³äºå‹è°Šå’Œå†’é™©çš„ç«¥è¯æ•…äº‹

[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%

æ•…äº‹ç”Ÿæˆå®Œæˆï¼
æ•…äº‹å·²ä¿å­˜åˆ°: data/input/input.md
æ•…äº‹é•¿åº¦: 1,234 å­—
ç« èŠ‚æ•°é‡: 3 ç« 
```

#### ğŸ”„ ç”Ÿæˆå‚æ•°è¯´æ˜

ç³»ç»Ÿä¼šæ ¹æ®ä»¥ä¸‹å‚æ•°ç”Ÿæˆæ•…äº‹ï¼š

- **æ¨¡å‹é€‰æ‹©**ï¼šä¼˜å…ˆä½¿ç”¨ DeepSeekï¼ˆå¦‚å·²é…ç½®ï¼‰ï¼Œå¦åˆ™ä½¿ç”¨ OpenAI GPT
- **æ•…äº‹é•¿åº¦**ï¼šé€šå¸¸ç”Ÿæˆ 800-2000 å­—çš„ä¸­ç¯‡æ•…äº‹
- **ç« èŠ‚ç»“æ„**ï¼šè‡ªåŠ¨åˆ†ä¸º 2-5 ä¸ªç« èŠ‚
- **è§’è‰²è®¾å®š**ï¼šæ ¹æ®ä¸»é¢˜è‡ªåŠ¨åˆ›å»ºåˆé€‚çš„è§’è‰²
- **æƒ…èŠ‚å‘å±•**ï¼šåŒ…å«å¼€ç«¯ã€å‘å±•ã€é«˜æ½®ã€ç»“å±€çš„å®Œæ•´ç»“æ„

### ğŸ“ æ–‡ä»¶ç®¡ç†

#### ğŸ” ç”Ÿæˆæ–‡ä»¶ä½ç½®

æ•…äº‹ç”Ÿæˆå®Œæˆåï¼Œæ–‡ä»¶å°†ä¿å­˜åœ¨ä»¥ä¸‹ä½ç½®ï¼š

```
data/input/
â”œâ”€â”€ input.md          # æ–°ç”Ÿæˆçš„æ•…äº‹å†…å®¹
â”œâ”€â”€ backup/           # å¤‡ä»½æ–‡ä»¶å¤¹
â”‚   â””â”€â”€ input_YYYYMMDD_HHMMSS.md  # ä¹‹å‰çš„æ•…äº‹å¤‡ä»½
```

#### ğŸ’¾ è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

**å¤‡ä»½è§„åˆ™ï¼š**
1. å¦‚æœ `input.md` å·²å­˜åœ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¤‡ä»½
2. å¤‡ä»½æ–‡ä»¶åæ ¼å¼ï¼š`input_20250119_143022.md`
3. å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨ `data/input/backup/` ç›®å½•
4. ç³»ç»Ÿä¼šä¿ç•™æ‰€æœ‰å†å²å¤‡ä»½ï¼Œä¸ä¼šè‡ªåŠ¨åˆ é™¤

**æ‰‹åŠ¨å¤‡ä»½ï¼š**
```bash
# æ‰‹åŠ¨å¤‡ä»½å½“å‰æ•…äº‹
cp data/input/input.md data/input/backup/input_$(date +%Y%m%d_%H%M%S).md
```

#### ğŸ“– æŸ¥çœ‹ç”Ÿæˆçš„æ•…äº‹

**ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼š**
```bash
# ä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨æ‰“å¼€
open data/input/input.md

# æˆ–ä½¿ç”¨ç‰¹å®šç¼–è¾‘å™¨
code data/input/input.md    # VS Code
vim data/input/input.md     # Vim
nano data/input/input.md    # Nano
```

**é¢„è§ˆæ•…äº‹å†…å®¹ï¼š**
```bash
# æŸ¥çœ‹æ•…äº‹å¼€å¤´
head -20 data/input/input.md

# æŸ¥çœ‹å®Œæ•´å†…å®¹
cat data/input/input.md
```

### ğŸ”„ é‡æ–°ç”Ÿæˆæ•…äº‹

å¦‚æœå¯¹ç”Ÿæˆçš„æ•…äº‹ä¸æ»¡æ„ï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆï¼š

1. **é‡æ–°è¿è¡Œç”Ÿæˆå‘½ä»¤**
   ```bash
   uv run main.py --module story_generator
   ```

2. **è¾“å…¥æ–°çš„ä¸»é¢˜æˆ–ç›¸åŒä¸»é¢˜**
   - ç›¸åŒä¸»é¢˜å¯èƒ½äº§ç”Ÿä¸åŒçš„æ•…äº‹ç‰ˆæœ¬
   - å¯ä»¥å°è¯•æ›´å…·ä½“æˆ–æ›´æŠ½è±¡çš„ä¸»é¢˜æè¿°

3. **ç³»ç»Ÿä¼šè‡ªåŠ¨å¤‡ä»½ä¹‹å‰çš„ç‰ˆæœ¬**

### âš ï¸ æ³¨æ„äº‹é¡¹

#### ğŸ”‘ APIä½¿ç”¨
- **è´¹ç”¨æ§åˆ¶**ï¼šAIç”Ÿæˆä¼šæ¶ˆè€—APIè°ƒç”¨é¢åº¦ï¼Œè¯·æ³¨æ„è´¹ç”¨
- **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
- **å“åº”æ—¶é—´**ï¼šç”Ÿæˆè¿‡ç¨‹é€šå¸¸éœ€è¦ 30-60 ç§’

#### ğŸ“ å†…å®¹è´¨é‡
- **äººå·¥å®¡æ ¸**ï¼šå»ºè®®å¯¹ç”Ÿæˆçš„å†…å®¹è¿›è¡Œäººå·¥å®¡æ ¸å’Œç¼–è¾‘
- **è§’è‰²ä¸€è‡´æ€§**ï¼šæ£€æŸ¥è§’è‰²åç§°æ˜¯å¦ä¸ `character_mapping.json` åŒ¹é…
- **æƒ…èŠ‚è¿è´¯æ€§**ï¼šç¡®ä¿æ•…äº‹æƒ…èŠ‚é€»è¾‘åˆç†

#### ğŸ› ï¸ æ•…éšœæ’é™¤

**å¸¸è§é—®é¢˜ï¼š**

1. **APIå¯†é’¥é”™è¯¯**
   ```
   é”™è¯¯: OpenAI API key not found
   è§£å†³: æ£€æŸ¥ .env æ–‡ä»¶ä¸­çš„ OPENAI_API_KEY é…ç½®
   ```

2. **ç½‘ç»œè¿æ¥é—®é¢˜**
   ```
   é”™è¯¯: Connection timeout
   è§£å†³: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–å°è¯•ä½¿ç”¨ä»£ç†
   ```

3. **ç”Ÿæˆå†…å®¹ä¸ºç©º**
   ```
   è§£å†³: å°è¯•æ›´å…·ä½“çš„ä¸»é¢˜æè¿°ï¼Œæˆ–æ£€æŸ¥APIä½™é¢
   ```

4. **æ–‡ä»¶æƒé™é—®é¢˜**
   ```
   é”™è¯¯: Permission denied
   è§£å†³: æ£€æŸ¥ data/input/ ç›®å½•çš„å†™å…¥æƒé™
   ```

---

## ğŸ”„ å®Œæ•´æµæ°´çº¿æ“ä½œ

Story Flow çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å®Œæ•´çš„æ–‡æœ¬åˆ°è§†é¢‘ç”Ÿæˆæµæ°´çº¿ã€‚æ‚¨å¯ä»¥é€‰æ‹©è‡ªåŠ¨æ¨¡å¼ä¸€é”®å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼Œæˆ–è€…åˆ†æ­¥æ‰§è¡Œæ¯ä¸ªæ¨¡å—ä»¥è·å¾—æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚

### ğŸš€ è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¨èï¼‰

è‡ªåŠ¨æ¨¡å¼æ˜¯æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰å¿…è¦çš„æ­¥éª¤ï¼Œä»æ–‡æœ¬åˆ†æåˆ°æœ€ç»ˆè§†é¢‘ç”Ÿæˆã€‚

#### ğŸ“‹ ä½¿ç”¨å‰æ£€æŸ¥

åœ¨å¯åŠ¨è‡ªåŠ¨æ¨¡å¼å‰ï¼Œè¯·ç¡®ä¿ï¼š

âœ… **é…ç½®æ–‡ä»¶å®Œæ•´**
- `.env` æ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…éœ€çš„APIå¯†é’¥
- `character_mapping.json` å·²é…ç½®ï¼ˆå¦‚éœ€è§’è‰²æ˜ å°„ï¼‰

âœ… **è¾“å…¥æ–‡ä»¶å‡†å¤‡**
- `data/input/input.md` æ–‡ä»¶å­˜åœ¨ä¸”åŒ…å«æ•…äº‹å†…å®¹
- æ–‡ä»¶æ ¼å¼ç¬¦åˆè¦æ±‚ï¼ˆMarkdownæ ¼å¼ï¼ŒåŒ…å«ç« èŠ‚æ ‡è¯†ï¼‰

âœ… **æœåŠ¡çŠ¶æ€**
- Stable Diffusion WebUI æ­£åœ¨è¿è¡Œï¼ˆå¦‚ä½¿ç”¨æœ¬åœ°SDï¼‰
- ç½‘ç»œè¿æ¥æ­£å¸¸

#### ğŸ¬ å¯åŠ¨è‡ªåŠ¨æ¨¡å¼

**æ–¹æ³•ä¸€ï¼šäº¤äº’å¼èœå•**

1. å¯åŠ¨ç¨‹åºï¼š
   ```bash
   uv run main.py
   ```

2. é€‰æ‹©è‡ªåŠ¨æ¨¡å¼ï¼š
   ```
   è¯·é€‰æ‹©æ“ä½œï¼š
   1. è‡ªåŠ¨è¿è¡Œå®Œæ•´æµæ°´çº¿  â† é€‰æ‹©æ­¤é¡¹
   2. ç”Ÿæˆæ–°æ•…äº‹ (AIåˆ›ä½œ)
   3. åˆ†å‰²æ–‡æœ¬ä¸ºç« èŠ‚
   ...
   
   è¯·è¾“å…¥é€‰é¡¹ (1-8): 1
   ```

**æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œç›´æ¥å¯åŠ¨**

```bash
# å¯åŠ¨å®Œæ•´è‡ªåŠ¨æµæ°´çº¿
uv run main.py --auto

# æˆ–ä½¿ç”¨å®Œæ•´å‚æ•°å
uv run main.py --auto-run
```

#### ğŸ“Š æ‰§è¡Œè¿‡ç¨‹ç›‘æ§

è‡ªåŠ¨æ¨¡å¼å¯åŠ¨åï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºè¯¦ç»†çš„æ‰§è¡Œè¿›åº¦ï¼š

```
========================================
Story Flow - è‡ªåŠ¨æµæ°´çº¿æ‰§è¡Œ
========================================

ğŸ“– æ­¥éª¤ 1/5: æ–‡æœ¬åˆ†æ
æ­£åœ¨åˆ†æè¾“å…¥æ–‡ä»¶: data/input/input.md
æ£€æµ‹åˆ°ç« èŠ‚æ•°é‡: 3
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% å®Œæˆ

ğŸ“Š æ­¥éª¤ 2/5: ç”Ÿæˆæ•…äº‹æ¿
æ­£åœ¨ç”Ÿæˆæ•…äº‹æ¿...
ä½¿ç”¨æ¨¡å‹: gpt-3.5-turbo
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% å®Œæˆ
ç”Ÿæˆæ•…äº‹æ¿æ¡ç›®: 15 ä¸ª

ğŸ¨ æ­¥éª¤ 3/5: ç”Ÿæˆå›¾åƒ
æ­£åœ¨ç”Ÿæˆå›¾åƒ (1/15): æ£®æ—ä¸­çš„å°å±‹
æ­£åœ¨ç”Ÿæˆå›¾åƒ (2/15): å‹‡æ•¢çš„å°å¥³å­©
...
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% å®Œæˆ
æˆåŠŸç”Ÿæˆå›¾åƒ: 15/15

ğŸ™ï¸ æ­¥éª¤ 4/5: ç”Ÿæˆè¯­éŸ³
æ­£åœ¨åˆæˆè¯­éŸ³: ç¬¬1ç« 
æ­£åœ¨åˆæˆè¯­éŸ³: ç¬¬2ç« 
...
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% å®Œæˆ

ğŸ¬ æ­¥éª¤ 5/5: ç”Ÿæˆè§†é¢‘
æ­£åœ¨åˆæˆè§†é¢‘: ç¬¬1ç« 
æ­£åœ¨åˆæˆè§†é¢‘: ç¬¬2ç« 
...
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% å®Œæˆ

âœ… æµæ°´çº¿æ‰§è¡Œå®Œæˆï¼
æ€»è€—æ—¶: 15åˆ†32ç§’
è¾“å‡ºæ–‡ä»¶ä½ç½®: data/output/
```

#### ğŸ¯ æ‰§è¡Œç»“æœ

è‡ªåŠ¨æ¨¡å¼å®Œæˆåï¼Œæ‚¨å°†è·å¾—ä»¥ä¸‹è¾“å‡ºæ–‡ä»¶ï¼š

```
data/output/
â”œâ”€â”€ chapters/                    # ç« èŠ‚æ–‡ä»¶
â”‚   â”œâ”€â”€ chapter_1.md
â”‚   â”œâ”€â”€ chapter_2.md
â”‚   â””â”€â”€ chapter_3.md
â”œâ”€â”€ storyboard.csv              # æ•…äº‹æ¿æ–‡ä»¶
â”œâ”€â”€ images/                     # ç”Ÿæˆçš„å›¾åƒ
â”‚   â”œâ”€â”€ image_001.png
â”‚   â”œâ”€â”€ image_002.png
â”‚   â””â”€â”€ ...
â”œâ”€â”€ audio/                      # è¯­éŸ³æ–‡ä»¶
â”‚   â”œâ”€â”€ chapter_1.wav
â”‚   â”œâ”€â”€ chapter_2.wav
â”‚   â””â”€â”€ chapter_3.wav
â””â”€â”€ videos/                     # æœ€ç»ˆè§†é¢‘
    â”œâ”€â”€ chapter_1.mp4
    â”œâ”€â”€ chapter_2.mp4
    â”œâ”€â”€ chapter_3.mp4
    â””â”€â”€ final_video.mp4         # åˆå¹¶åçš„å®Œæ•´è§†é¢‘
```

### ğŸ”§ åˆ†æ­¥æ‰§è¡Œæ¨¡å¼

åˆ†æ­¥æ‰§è¡Œæ¨¡å¼å…è®¸æ‚¨å•ç‹¬è¿è¡Œæ¯ä¸ªæ¨¡å—ï¼Œé€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶æˆ–è°ƒè¯•çš„åœºæ™¯ã€‚

#### ğŸ“ æ­¥éª¤1ï¼šæ–‡æœ¬åˆ†æ

**åŠŸèƒ½è¯´æ˜ï¼š**
- è§£æ `input.md` æ–‡ä»¶
- è¯†åˆ«ç« èŠ‚ç»“æ„
- åˆ†å‰²æ–‡æœ¬ä¸ºç‹¬ç«‹ç« èŠ‚æ–‡ä»¶

**æ‰§è¡Œæ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼èœå•é€‰æ‹©é€‰é¡¹3
uv run main.py

# æˆ–å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œ
uv run main.py --module text_analyzer
uv run main.py -m text_analyzer
```

**è¾“å‡ºç»“æœï¼š**
```
data/output/chapters/
â”œâ”€â”€ chapter_1.md
â”œâ”€â”€ chapter_2.md
â””â”€â”€ chapter_3.md
```

#### ğŸ“Š æ­¥éª¤2ï¼šç”Ÿæˆæ•…äº‹æ¿

**åŠŸèƒ½è¯´æ˜ï¼š**
- åˆ†æç« èŠ‚å†…å®¹
- ç”Ÿæˆè¯¦ç»†çš„è§†è§‰æè¿°
- åˆ›å»ºæ•…äº‹æ¿CSVæ–‡ä»¶

**æ‰§è¡Œæ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼èœå•é€‰æ‹©é€‰é¡¹4
uv run main.py

# æˆ–å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œ
uv run main.py --module storyboard_generator
uv run main.py -m storyboard_generator
```

**è¾“å‡ºç»“æœï¼š**
```
data/output/storyboard.csv
```

**æ•…äº‹æ¿æ–‡ä»¶æ ¼å¼ï¼š**
```csv
chapter,scene_number,text,image_prompt,character_info
1,1,"å°çº¢å¸½èµ°åœ¨æ£®æ—å°å¾„ä¸Š","A little girl in red hood walking on forest path, fairy tale style","å°çº¢å¸½:little_girl_lora"
1,2,"å¥¹é‡åˆ°äº†å¤§ç°ç‹¼","A big gray wolf in the forest, menacing but cartoon style","å¤§ç°ç‹¼:wolf_character"
```

#### ğŸ¨ æ­¥éª¤3ï¼šç”Ÿæˆå›¾åƒ

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ ¹æ®æ•…äº‹æ¿ç”ŸæˆAIå›¾åƒ
- åº”ç”¨è§’è‰²æ˜ å°„å’ŒLoRAæ¨¡å‹
- æ”¯æŒæ‰¹é‡å¹¶å‘ç”Ÿæˆ

**æ‰§è¡Œæ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼èœå•é€‰æ‹©é€‰é¡¹5
uv run main.py

# æˆ–å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œ
uv run main.py --module image_generator
uv run main.py -m image_generator
```

**ç”Ÿæˆè¿‡ç¨‹ï¼š**
```
ğŸ¨ å›¾åƒç”Ÿæˆè¿›åº¦:
[1/15] æ­£åœ¨ç”Ÿæˆ: æ£®æ—å°å¾„ä¸Šçš„å°çº¢å¸½
[2/15] æ­£åœ¨ç”Ÿæˆ: æ£®æ—ä¸­çš„å¤§ç°ç‹¼
[3/15] æ­£åœ¨ç”Ÿæˆ: å¥¶å¥¶çš„å°å±‹
...
âœ… å›¾åƒç”Ÿæˆå®Œæˆ: 15/15 æˆåŠŸ
```

**è¾“å‡ºç»“æœï¼š**
```
data/output/images/
â”œâ”€â”€ image_001.png
â”œâ”€â”€ image_002.png
â”œâ”€â”€ image_003.png
â””â”€â”€ ...
```

#### ğŸ™ï¸ æ­¥éª¤4ï¼šç”Ÿæˆè¯­éŸ³

**åŠŸèƒ½è¯´æ˜ï¼š**
- å°†ç« èŠ‚æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³
- ä½¿ç”¨Azure TTSæœåŠ¡
- æ”¯æŒå¤šç§ä¸­æ–‡è¯­éŸ³è§’è‰²

**æ‰§è¡Œæ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼èœå•é€‰æ‹©é€‰é¡¹6
uv run main.py

# æˆ–å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œ
uv run main.py --module voice_synthesizer
uv run main.py -m voice_synthesizer
```

**ç”Ÿæˆè¿‡ç¨‹ï¼š**
```
ğŸ™ï¸ è¯­éŸ³åˆæˆè¿›åº¦:
æ­£åœ¨åˆæˆ: ç¬¬1ç«  (1,234 å­—ç¬¦)
æ­£åœ¨åˆæˆ: ç¬¬2ç«  (987 å­—ç¬¦)
æ­£åœ¨åˆæˆ: ç¬¬3ç«  (1,456 å­—ç¬¦)
âœ… è¯­éŸ³åˆæˆå®Œæˆ
```

**è¾“å‡ºç»“æœï¼š**
```
data/output/audio/
â”œâ”€â”€ chapter_1.wav
â”œâ”€â”€ chapter_2.wav
â””â”€â”€ chapter_3.wav
```

#### ğŸ¬ æ­¥éª¤5ï¼šç”Ÿæˆè§†é¢‘

**åŠŸèƒ½è¯´æ˜ï¼š**
- åˆæˆå›¾åƒã€éŸ³é¢‘å’Œå­—å¹•
- ç”Ÿæˆç« èŠ‚è§†é¢‘å’Œå®Œæ•´è§†é¢‘
- æ”¯æŒå¤šç§è§†é¢‘æ ¼å¼å’Œåˆ†è¾¨ç‡

**æ‰§è¡Œæ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼èœå•é€‰æ‹©é€‰é¡¹7
uv run main.py

# æˆ–å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œ
uv run main.py --module video_composer
uv run main.py -m video_composer
```

**ç”Ÿæˆè¿‡ç¨‹ï¼š**
```
ğŸ¬ è§†é¢‘åˆæˆè¿›åº¦:
æ­£åœ¨åˆæˆ: ç¬¬1ç« è§†é¢‘
  - æ·»åŠ å›¾åƒåºåˆ—
  - æ·»åŠ èƒŒæ™¯éŸ³é¢‘
  - ç”Ÿæˆå­—å¹•è½¨é“
æ­£åœ¨åˆæˆ: ç¬¬2ç« è§†é¢‘
...
æ­£åœ¨åˆå¹¶æœ€ç»ˆè§†é¢‘
âœ… è§†é¢‘ç”Ÿæˆå®Œæˆ
```

**è¾“å‡ºç»“æœï¼š**
```
data/output/videos/
â”œâ”€â”€ chapter_1.mp4
â”œâ”€â”€ chapter_2.mp4
â”œâ”€â”€ chapter_3.mp4
â””â”€â”€ final_video.mp4
```

### âš¡ æ‰§è¡Œæ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | è‡ªåŠ¨æ¨¡å¼ | åˆ†æ­¥æ‰§è¡Œæ¨¡å¼ |
|------|----------|-------------|
| **æ˜“ç”¨æ€§** | â­â­â­â­â­ ä¸€é”®å®Œæˆ | â­â­â­ éœ€è¦é€æ­¥æ“ä½œ |
| **æ§åˆ¶ç²¾åº¦** | â­â­ æœ‰é™æ§åˆ¶ | â­â­â­â­â­ å®Œå…¨æ§åˆ¶ |
| **è°ƒè¯•èƒ½åŠ›** | â­â­ éš¾ä»¥å®šä½é—®é¢˜ | â­â­â­â­â­ æ˜“äºè°ƒè¯• |
| **æ—¶é—´æ•ˆç‡** | â­â­â­â­â­ æœ€å¿« | â­â­â­ éœ€è¦æ‰‹åŠ¨æ“ä½œ |
| **é€‚ç”¨åœºæ™¯** | æ—¥å¸¸ä½¿ç”¨ã€æ‰¹é‡å¤„ç† | å¼€å‘è°ƒè¯•ã€ç²¾ç»†è°ƒä¼˜ |

### ğŸ’¡ ä½¿ç”¨å»ºè®®

**é€‰æ‹©è‡ªåŠ¨æ¨¡å¼çš„æƒ…å†µï¼š**
- é¦–æ¬¡ä½¿ç”¨ï¼Œé…ç½®å·²å®Œæˆ
- æ‰¹é‡å¤„ç†å¤šä¸ªæ•…äº‹
- å¯¹ç»“æœè´¨é‡è¦æ±‚ä¸é«˜
- å¸Œæœ›å¿«é€Ÿè·å¾—ç»“æœ

**é€‰æ‹©åˆ†æ­¥æ‰§è¡Œçš„æƒ…å†µï¼š**
- éœ€è¦è°ƒè¯•ç‰¹å®šæ­¥éª¤
- å¯¹æŸä¸ªç¯èŠ‚æœ‰ç‰¹æ®Šè¦æ±‚
- æƒ³è¦äº†è§£æ¯æ­¥çš„è¯¦ç»†è¿‡ç¨‹
- éœ€è¦åœ¨ä¸­é—´æ­¥éª¤è¿›è¡Œäººå·¥å¹²é¢„

---

## ğŸ”§ æ¨¡å—è¯¦ç»†ä½¿ç”¨æŒ‡å—

æœ¬ç« èŠ‚è¯¦ç»†ä»‹ç»æ¯ä¸ªæ¨¡å—çš„ç‹¬ç«‹ä½¿ç”¨æ–¹æ³•ã€å‚æ•°é…ç½®å’Œä¼˜åŒ–æŠ€å·§ã€‚é€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶æˆ–æ·±åº¦å®šåˆ¶çš„ç”¨æˆ·ã€‚

### ğŸ“ æ–‡æœ¬åˆ†ææ¨¡å— (Text Analyzer)

æ–‡æœ¬åˆ†ææ¨¡å—è´Ÿè´£è§£æè¾“å…¥çš„Markdownæ–‡ä»¶ï¼Œè¯†åˆ«ç« èŠ‚ç»“æ„ï¼Œå¹¶å°†å†…å®¹åˆ†å‰²ä¸ºç‹¬ç«‹çš„ç« èŠ‚æ–‡ä»¶ã€‚

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **ç« èŠ‚è¯†åˆ«**ï¼šè‡ªåŠ¨è¯†åˆ« `## ç¬¬Xç« ` æˆ– `## Chapter X` æ ¼å¼çš„ç« èŠ‚æ ‡é¢˜
- **å†…å®¹åˆ†å‰²**ï¼šå°†é•¿æ–‡æœ¬æŒ‰ç« èŠ‚åˆ†å‰²ä¸ºç‹¬ç«‹æ–‡ä»¶
- **æ ¼å¼æ¸…ç†**ï¼šæ¸…ç†å¤šä½™çš„ç©ºè¡Œå’Œæ ¼å¼é—®é¢˜
- **å…ƒæ•°æ®æå–**ï¼šæå–ç« èŠ‚æ ‡é¢˜ã€å­—æ•°ç»Ÿè®¡ç­‰ä¿¡æ¯

#### ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# å‘½ä»¤è¡Œæ‰§è¡Œ
uv run main.py --module text_analyzer

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m text_analyzer
```

#### âš™ï¸ é…ç½®å‚æ•°

æ–‡æœ¬åˆ†ææ¨¡å—çš„é…ç½®ä½äº `src/config.py` ä¸­ï¼š

```python
# ç« èŠ‚è¯†åˆ«æ¨¡å¼
CHAPTER_PATTERNS = [
    r'^##\s*ç¬¬[\dä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]+ç« ',  # ä¸­æ–‡ç« èŠ‚
    r'^##\s*Chapter\s+\d+',                # è‹±æ–‡ç« èŠ‚
    r'^##\s*ç¬¬[\d]+èŠ‚',                    # èŠ‚æ ‡è¯†
]

# æœ€å°ç« èŠ‚é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰
MIN_CHAPTER_LENGTH = 50

# è¾“å‡ºç›®å½•
CHAPTERS_OUTPUT_DIR = "data/output/chapters"
```

#### ğŸ“Š è¾“å‡ºç»“æœ

æ‰§è¡Œå®Œæˆåï¼Œä¼šåœ¨ `data/output/chapters/` ç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
chapters/
â”œâ”€â”€ chapter_1.md      # ç¬¬ä¸€ç« å†…å®¹
â”œâ”€â”€ chapter_2.md      # ç¬¬äºŒç« å†…å®¹
â”œâ”€â”€ chapter_3.md      # ç¬¬ä¸‰ç« å†…å®¹
â””â”€â”€ metadata.json     # ç« èŠ‚å…ƒæ•°æ®
```

**metadata.json ç¤ºä¾‹ï¼š**
```json
{
  "total_chapters": 3,
  "chapters": [
    {
      "id": 1,
      "title": "ç¬¬ä¸€ç«  æ£®æ—çš„ç§˜å¯†",
      "word_count": 456,
      "file_path": "chapter_1.md"
    },
    {
      "id": 2,
      "title": "ç¬¬äºŒç«  å‹‡æ•¢çš„å†’é™©",
      "word_count": 523,
      "file_path": "chapter_2.md"
    }
  ]
}
```

### ğŸ“Š æ•…äº‹æ¿ç”Ÿæˆæ¨¡å— (Storyboard Generator)

æ•…äº‹æ¿ç”Ÿæˆæ¨¡å—ä½¿ç”¨AIåˆ†æç« èŠ‚å†…å®¹ï¼Œç”Ÿæˆè¯¦ç»†çš„è§†è§‰æè¿°å’Œåœºæ™¯ä¿¡æ¯ã€‚

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **åœºæ™¯åˆ†æ**ï¼šAIç†è§£æ–‡æœ¬å†…å®¹ï¼Œè¯†åˆ«å…³é”®åœºæ™¯
- **è§†è§‰æè¿°**ï¼šç”Ÿæˆé€‚åˆå›¾åƒç”Ÿæˆçš„è‹±æ–‡æç¤ºè¯
- **è§’è‰²æ˜ å°„**ï¼šåº”ç”¨è§’è‰²æ˜ å°„é…ç½®ï¼Œæ›¿æ¢è§’è‰²åç§°
- **CSVè¾“å‡º**ï¼šç”Ÿæˆç»“æ„åŒ–çš„æ•…äº‹æ¿æ–‡ä»¶

#### ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# å‘½ä»¤è¡Œæ‰§è¡Œ
uv run main.py --module storyboard_generator

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m storyboard_generator
```

#### âš™ï¸ é…ç½®å‚æ•°

```python
# AIæ¨¡å‹é…ç½®
STORYBOARD_MODEL = "gpt-3.5-turbo"  # æˆ– "deepseek-chat"
MAX_SCENES_PER_CHAPTER = 10         # æ¯ç« æœ€å¤§åœºæ™¯æ•°
SCENE_DESCRIPTION_LENGTH = 200      # åœºæ™¯æè¿°æœ€å¤§é•¿åº¦

# æç¤ºè¯æ¨¡æ¿
STORYBOARD_PROMPT_TEMPLATE = """
åˆ†æä»¥ä¸‹ç« èŠ‚å†…å®¹ï¼Œç”Ÿæˆè§†è§‰åœºæ™¯æè¿°ï¼š

ç« èŠ‚å†…å®¹ï¼š{chapter_content}

è¦æ±‚ï¼š
1. è¯†åˆ«3-8ä¸ªå…³é”®è§†è§‰åœºæ™¯
2. ä¸ºæ¯ä¸ªåœºæ™¯ç”Ÿæˆè‹±æ–‡å›¾åƒæç¤ºè¯
3. æ ‡æ³¨å‡ºç°çš„è§’è‰²
4. æè¿°åœºæ™¯çš„è§†è§‰å…ƒç´ 
"""
```

#### ğŸ“Š è¾“å‡ºç»“æœ

ç”Ÿæˆçš„ `storyboard.csv` æ–‡ä»¶æ ¼å¼ï¼š

```csv
chapter,scene_number,text,image_prompt,character_info,duration
1,1,"å°çº¢å¸½èµ°åœ¨æ£®æ—å°å¾„ä¸Šï¼Œé˜³å…‰é€è¿‡æ ‘å¶æ´’ä¸‹æ–‘é©³çš„å…‰å½±ã€‚","A little girl in red hood walking on a forest path, sunlight filtering through leaves, fairy tale style, warm lighting","å°çº¢å¸½:little_girl_lora:0.8",5.0
1,2,"å¥¹é‡åˆ°äº†ä¸€åªçœ‹èµ·æ¥å‹å–„çš„å¤§ç°ç‹¼ã€‚","A big gray wolf with friendly expression in the forest, cartoon style, not scary","å¤§ç°ç‹¼:wolf_character:0.7",4.0
2,1,"å°çº¢å¸½æ¥åˆ°äº†å¥¶å¥¶çš„å°å±‹å‰ã€‚","A cozy cottage in the forest with flower garden, fairy tale architecture","",3.0
```

**å­—æ®µè¯´æ˜ï¼š**
- `chapter`: ç« èŠ‚ç¼–å·
- `scene_number`: åœºæ™¯ç¼–å·
- `text`: åŸæ–‡æè¿°
- `image_prompt`: è‹±æ–‡å›¾åƒç”Ÿæˆæç¤ºè¯
- `character_info`: è§’è‰²ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šè§’è‰²å:LoRAæ¨¡å‹:æƒé‡ï¼‰
- `duration`: å»ºè®®æ˜¾ç¤ºæ—¶é•¿ï¼ˆç§’ï¼‰

### ğŸ¨ å›¾åƒç”Ÿæˆæ¨¡å— (Image Generator)

å›¾åƒç”Ÿæˆæ¨¡å—æ ¹æ®æ•…äº‹æ¿æ–‡ä»¶ï¼Œä½¿ç”¨Stable Diffusionç”Ÿæˆé«˜è´¨é‡çš„AIå›¾åƒã€‚

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **æ‰¹é‡ç”Ÿæˆ**ï¼šæ ¹æ®æ•…äº‹æ¿æ‰¹é‡ç”Ÿæˆå›¾åƒ
- **LoRAæ”¯æŒ**ï¼šåº”ç”¨è§’è‰²LoRAæ¨¡å‹ï¼Œä¿æŒè§’è‰²ä¸€è‡´æ€§
- **å¹¶å‘å¤„ç†**ï¼šå¤šçº¿ç¨‹å¹¶å‘ç”Ÿæˆï¼Œæé«˜æ•ˆç‡
- **è´¨é‡æ§åˆ¶**ï¼šæ”¯æŒå¤šç§ç”Ÿæˆå‚æ•°è°ƒèŠ‚

#### ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# å‘½ä»¤è¡Œæ‰§è¡Œ
uv run main.py --module image_generator

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m image_generator
```

#### âš™ï¸ é…ç½®å‚æ•°

```python
# Stable Diffusion é…ç½®
SD_API_BASE_URL = "http://127.0.0.1:7860"  # SD WebUIåœ°å€
SD_MODEL = "sd_xl_base_1.0.safetensors"    # ä½¿ç”¨çš„æ¨¡å‹

# ç”Ÿæˆå‚æ•°
IMAGE_WIDTH = 1024                         # å›¾åƒå®½åº¦
IMAGE_HEIGHT = 768                         # å›¾åƒé«˜åº¦
SAMPLING_STEPS = 20                        # é‡‡æ ·æ­¥æ•°
CFG_SCALE = 7.0                           # CFGå¼•å¯¼å¼ºåº¦
SAMPLER_NAME = "DPM++ 2M Karras"          # é‡‡æ ·å™¨

# å¹¶å‘è®¾ç½®
MAX_CONCURRENT_IMAGES = 3                  # æœ€å¤§å¹¶å‘æ•°
IMAGE_GENERATION_TIMEOUT = 120             # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰

# è´¨é‡æ§åˆ¶
NEGATIVE_PROMPT = "low quality, blurry, distorted, ugly, bad anatomy"
ENABLE_UPSCALING = True                    # å¯ç”¨æ”¾å¤§
UPSCALE_FACTOR = 2                         # æ”¾å¤§å€æ•°
```

#### ğŸ¨ é«˜çº§å‚æ•°è°ƒä¼˜

**æç¤ºè¯ä¼˜åŒ–ï¼š**
```python
# åŸºç¡€æç¤ºè¯æ¨¡æ¿
BASE_PROMPT_TEMPLATE = "{scene_prompt}, high quality, detailed, masterpiece, best quality"

# é£æ ¼æç¤ºè¯
STYLE_PROMPTS = {
    "fairy_tale": "fairy tale style, storybook illustration, whimsical",
    "realistic": "photorealistic, cinematic lighting, detailed",
    "anime": "anime style, manga, cel shading",
    "cartoon": "cartoon style, colorful, friendly"
}

# è´Ÿé¢æç¤ºè¯
NEGATIVE_PROMPTS = {
    "quality": "low quality, blurry, distorted, ugly",
    "anatomy": "bad anatomy, extra limbs, malformed",
    "style": "realistic, photograph" # ç”¨äºå¡é€šé£æ ¼
}
```

**LoRAé…ç½®ä¼˜åŒ–ï¼š**
```json
{
  "å°çº¢å¸½": {
    "lora_model": "little_red_riding_hood_v2",
    "lora_weight": 0.8,
    "trigger_words": ["red hood", "little girl"],
    "style_preference": "fairy_tale"
  }
}
```

#### ğŸ“Š è¾“å‡ºç»“æœ

ç”Ÿæˆçš„å›¾åƒä¿å­˜åœ¨ `data/output/images/` ç›®å½•ï¼š

```
images/
â”œâ”€â”€ image_001.png     # ç¬¬1ç« ç¬¬1åœºæ™¯
â”œâ”€â”€ image_002.png     # ç¬¬1ç« ç¬¬2åœºæ™¯
â”œâ”€â”€ image_003.png     # ç¬¬2ç« ç¬¬1åœºæ™¯
â”œâ”€â”€ ...
â””â”€â”€ generation_log.json  # ç”Ÿæˆæ—¥å¿—
```

**generation_log.json ç¤ºä¾‹ï¼š**
```json
{
  "total_images": 15,
  "successful": 14,
  "failed": 1,
  "generation_time": "00:12:34",
  "images": [
    {
      "id": "image_001",
      "chapter": 1,
      "scene": 1,
      "prompt": "A little girl in red hood...",
      "lora_used": "little_girl_lora:0.8",
      "generation_time": 45.2,
      "status": "success"
    }
  ]
}
```

### ğŸ™ï¸ è¯­éŸ³åˆæˆæ¨¡å— (Voice Synthesizer)

è¯­éŸ³åˆæˆæ¨¡å—ä½¿ç”¨Azure TTSæœåŠ¡å°†æ–‡æœ¬è½¬æ¢ä¸ºè‡ªç„¶æµç•…çš„è¯­éŸ³ã€‚

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **å¤šè¯­éŸ³è§’è‰²**ï¼šæ”¯æŒå¤šç§ä¸­æ–‡è¯­éŸ³è§’è‰²
- **æƒ…æ„Ÿæ§åˆ¶**ï¼šå¯é…ç½®è¯­éŸ³é£æ ¼å’Œæƒ…æ„Ÿ
- **æ‰¹é‡å¤„ç†**ï¼šæŒ‰ç« èŠ‚æ‰¹é‡ç”Ÿæˆè¯­éŸ³
- **æ ¼å¼ä¼˜åŒ–**ï¼šè¾“å‡ºé«˜è´¨é‡WAVæ ¼å¼éŸ³é¢‘

#### ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# å‘½ä»¤è¡Œæ‰§è¡Œ
uv run main.py --module voice_synthesizer

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m voice_synthesizer
```

#### âš™ï¸ é…ç½®å‚æ•°

```python
# Azure TTS é…ç½®
AZURE_SPEECH_KEY = "your_azure_speech_key"
AZURE_SPEECH_REGION = "eastus"

# è¯­éŸ³è®¾ç½®
VOICE_NAME = "zh-CN-XiaoxiaoNeural"       # é»˜è®¤è¯­éŸ³è§’è‰²
SPEECH_RATE = "0%"                        # è¯­é€Ÿè°ƒèŠ‚ (-50% åˆ° +200%)
SPEECH_PITCH = "+0Hz"                     # éŸ³è°ƒè°ƒèŠ‚
SPEECH_VOLUME = "+0%"                     # éŸ³é‡è°ƒèŠ‚

# è¾“å‡ºæ ¼å¼
AUDIO_FORMAT = "riff-24khz-16bit-mono-pcm"  # éŸ³é¢‘æ ¼å¼
AUDIO_SAMPLE_RATE = 24000                   # é‡‡æ ·ç‡

# å¤„ç†è®¾ç½®
MAX_TEXT_LENGTH = 3000                      # å•æ¬¡åˆæˆæœ€å¤§å­—ç¬¦æ•°
SSML_ENABLED = True                         # å¯ç”¨SSMLæ ‡è®°
```

#### ğŸµ è¯­éŸ³è§’è‰²é€‰æ‹©

**æ¨èçš„ä¸­æ–‡è¯­éŸ³è§’è‰²ï¼š**

| è§’è‰²åç§° | æ€§åˆ« | å¹´é¾„ | é£æ ¼ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|----------|------|------|----------|----------|
| `zh-CN-XiaoxiaoNeural` | å¥³ | æˆäºº | æ¸©æŸ”ã€äº²åˆ‡ | æ•…äº‹å™è¿°ã€å„¿ç«¥å†…å®¹ |
| `zh-CN-YunxiNeural` | ç”· | æˆäºº | æ²‰ç¨³ã€ä¸“ä¸š | æ­£å¼å™è¿°ã€æ•™è‚²å†…å®¹ |
| `zh-CN-XiaoyiNeural` | å¥³ | é’å¹´ | æ´»æ³¼ã€æ¸…æ–° | é’æ˜¥æ•…äº‹ã€è½»æ¾å†…å®¹ |
| `zh-CN-YunjianNeural` | ç”· | é’å¹´ | é˜³å…‰ã€å‹å–„ | å†’é™©æ•…äº‹ã€ç§¯æå†…å®¹ |
| `zh-CN-XiaochenNeural` | å¥³ | å„¿ç«¥ | å¤©çœŸã€å¯çˆ± | å„¿ç«¥è§’è‰²ã€ç«¥è¯æ•…äº‹ |

#### ğŸ­ SSMLé«˜çº§æ§åˆ¶

ä½¿ç”¨SSMLï¼ˆSpeech Synthesis Markup Languageï¼‰å¯ä»¥ç²¾ç¡®æ§åˆ¶è¯­éŸ³æ•ˆæœï¼š

```xml
<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="zh-CN">
  <voice name="zh-CN-XiaoxiaoNeural">
    <prosody rate="slow" pitch="+2st">
      "ä½ å¥½ï¼Œä¸–ç•Œï¼"
    </prosody>
    <break time="1s"/>
    <prosody rate="fast" volume="loud">
      å°çº¢å¸½å…´å¥‹åœ°è¯´é“ã€‚
    </prosody>
  </voice>
</speak>
```

**SSMLæ ‡ç­¾è¯´æ˜ï¼š**
- `<prosody>`: æ§åˆ¶è¯­é€Ÿã€éŸ³è°ƒã€éŸ³é‡
- `<break>`: æ’å…¥åœé¡¿
- `<emphasis>`: å¼ºè°ƒç‰¹å®šè¯è¯­
- `<say-as>`: æŒ‡å®šæ•°å­—ã€æ—¥æœŸçš„è¯»æ³•

#### ğŸ“Š è¾“å‡ºç»“æœ

ç”Ÿæˆçš„éŸ³é¢‘æ–‡ä»¶ä¿å­˜åœ¨ `data/output/audio/` ç›®å½•ï¼š

```
audio/
â”œâ”€â”€ chapter_1.wav     # ç¬¬1ç« éŸ³é¢‘
â”œâ”€â”€ chapter_2.wav     # ç¬¬2ç« éŸ³é¢‘
â”œâ”€â”€ chapter_3.wav     # ç¬¬3ç« éŸ³é¢‘
â””â”€â”€ synthesis_log.json  # åˆæˆæ—¥å¿—
```

### ğŸ¬ è§†é¢‘åˆæˆæ¨¡å— (Video Composer)

è§†é¢‘åˆæˆæ¨¡å—å°†å›¾åƒã€éŸ³é¢‘å’Œå­—å¹•åˆæˆä¸ºæœ€ç»ˆçš„è§†é¢‘æ–‡ä»¶ã€‚

#### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **å¤šåª’ä½“åˆæˆ**ï¼šåˆæˆå›¾åƒåºåˆ—ã€èƒŒæ™¯éŸ³é¢‘å’Œå­—å¹•
- **ç« èŠ‚è§†é¢‘**ï¼šä¸ºæ¯ä¸ªç« èŠ‚ç”Ÿæˆç‹¬ç«‹è§†é¢‘
- **å®Œæ•´è§†é¢‘**ï¼šåˆå¹¶æ‰€æœ‰ç« èŠ‚ä¸ºå®Œæ•´è§†é¢‘
- **å­—å¹•ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆæ—¶é—´è½´åŒæ­¥çš„å­—å¹•

#### ğŸš€ ä½¿ç”¨æ–¹æ³•

```bash
# å‘½ä»¤è¡Œæ‰§è¡Œ
uv run main.py --module video_composer

# æˆ–ä½¿ç”¨ç®€å†™
uv run main.py -m video_composer
```

#### âš™ï¸ é…ç½®å‚æ•°

```python
# è§†é¢‘è¾“å‡ºè®¾ç½®
VIDEO_WIDTH = 1920                    # è§†é¢‘å®½åº¦
VIDEO_HEIGHT = 1080                   # è§†é¢‘é«˜åº¦
VIDEO_FPS = 30                        # å¸§ç‡
VIDEO_CODEC = "libx264"               # è§†é¢‘ç¼–ç å™¨
AUDIO_CODEC = "aac"                   # éŸ³é¢‘ç¼–ç å™¨
VIDEO_BITRATE = "5000k"               # è§†é¢‘æ¯”ç‰¹ç‡

# å›¾åƒæ˜¾ç¤ºè®¾ç½®
IMAGE_DURATION = 5.0                  # æ¯å¼ å›¾ç‰‡æ˜¾ç¤ºæ—¶é•¿ï¼ˆç§’ï¼‰
TRANSITION_DURATION = 0.5             # è½¬åœºæ—¶é•¿
TRANSITION_TYPE = "fade"              # è½¬åœºç±»å‹

# å­—å¹•è®¾ç½®
SUBTITLE_FONT = "Arial Unicode MS"    # å­—å¹•å­—ä½“
SUBTITLE_SIZE = 24                    # å­—å¹•å¤§å°
SUBTITLE_COLOR = "white"              # å­—å¹•é¢œè‰²
SUBTITLE_OUTLINE_COLOR = "black"      # å­—å¹•æè¾¹é¢œè‰²
SUBTITLE_POSITION = "bottom"          # å­—å¹•ä½ç½®

# èƒŒæ™¯éŸ³ä¹
BACKGROUND_MUSIC_ENABLED = False      # å¯ç”¨èƒŒæ™¯éŸ³ä¹
BACKGROUND_MUSIC_VOLUME = 0.3         # èƒŒæ™¯éŸ³ä¹éŸ³é‡
```

#### ğŸ¨ è§†è§‰æ•ˆæœé…ç½®

**è½¬åœºæ•ˆæœé€‰é¡¹ï¼š**
```python
TRANSITION_EFFECTS = {
    "fade": "æ·¡å…¥æ·¡å‡º",
    "slide_left": "å·¦æ»‘",
    "slide_right": "å³æ»‘",
    "zoom_in": "æ”¾å¤§",
    "zoom_out": "ç¼©å°",
    "dissolve": "æº¶è§£"
}
```

**å­—å¹•æ ·å¼é…ç½®ï¼š**
```python
SUBTITLE_STYLES = {
    "default": {
        "font_family": "Arial Unicode MS",
        "font_size": 24,
        "color": "white",
        "outline_color": "black",
        "outline_width": 2,
        "position": "bottom",
        "margin": 50
    },
    "title": {
        "font_size": 36,
        "color": "gold",
        "position": "center"
    }
}
```

#### ğŸ“Š è¾“å‡ºç»“æœ

ç”Ÿæˆçš„è§†é¢‘æ–‡ä»¶ä¿å­˜åœ¨ `data/output/videos/` ç›®å½•ï¼š

```
videos/
â”œâ”€â”€ chapter_1.mp4         # ç¬¬1ç« è§†é¢‘
â”œâ”€â”€ chapter_2.mp4         # ç¬¬2ç« è§†é¢‘
â”œâ”€â”€ chapter_3.mp4         # ç¬¬3ç« è§†é¢‘
â”œâ”€â”€ final_video.mp4       # å®Œæ•´åˆå¹¶è§†é¢‘
â”œâ”€â”€ subtitles/            # å­—å¹•æ–‡ä»¶
â”‚   â”œâ”€â”€ chapter_1.srt
â”‚   â”œâ”€â”€ chapter_2.srt
â”‚   â””â”€â”€ chapter_3.srt
â””â”€â”€ composition_log.json  # åˆæˆæ—¥å¿—
```

---

## ğŸš€ é«˜çº§åŠŸèƒ½å’ŒæŠ€å·§

æœ¬ç« èŠ‚ä»‹ç»Story Flowçš„é«˜çº§åŠŸèƒ½ã€å‚æ•°è°ƒä¼˜æŠ€å·§å’Œå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ç”¨æˆ·å……åˆ†å‘æŒ¥ç³»ç»Ÿçš„æ½œåŠ›ã€‚

### ğŸ“š å¤šç« èŠ‚å¤„ç†ç­–ç•¥

#### ğŸ¯ å¤§å‹é¡¹ç›®ç®¡ç†

å¯¹äºåŒ…å«å¤šä¸ªç« èŠ‚çš„å¤§å‹æ•…äº‹é¡¹ç›®ï¼ŒStory Flowæä¾›äº†é«˜æ•ˆçš„æ‰¹é‡å¤„ç†ç­–ç•¥ï¼š

**ç« èŠ‚åˆ†ç»„å¤„ç†ï¼š**
```python
# åœ¨ src/config.py ä¸­é…ç½®
BATCH_SIZE = 5                    # æ¯æ‰¹å¤„ç†çš„ç« èŠ‚æ•°
PARALLEL_CHAPTERS = 3             # å¹¶è¡Œå¤„ç†çš„ç« èŠ‚æ•°
CHAPTER_PROCESSING_DELAY = 2      # ç« èŠ‚é—´å¤„ç†å»¶è¿Ÿï¼ˆç§’ï¼‰

# å†…å­˜ç®¡ç†
MAX_MEMORY_USAGE = "4GB"          # æœ€å¤§å†…å­˜ä½¿ç”¨é‡
CLEAR_CACHE_INTERVAL = 10         # ç¼“å­˜æ¸…ç†é—´éš”ï¼ˆç« èŠ‚æ•°ï¼‰
```

**æ™ºèƒ½èµ„æºåˆ†é…ï¼š**
```python
# æ ¹æ®ç« èŠ‚é•¿åº¦åŠ¨æ€è°ƒæ•´èµ„æº
RESOURCE_ALLOCATION = {
    "short_chapter": {          # <500å­—
        "max_scenes": 3,
        "image_quality": "standard",
        "voice_speed": "normal"
    },
    "medium_chapter": {         # 500-1500å­—
        "max_scenes": 6,
        "image_quality": "high",
        "voice_speed": "normal"
    },
    "long_chapter": {           # >1500å­—
        "max_scenes": 10,
        "image_quality": "ultra",
        "voice_speed": "slow"
    }
}
```

#### ğŸ“Š è¿›åº¦ç›‘æ§å’Œæ¢å¤

**æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼š**
```bash
# å¯ç”¨æ–­ç‚¹ç»­ä¼ 
uv run main.py --auto --resume

# ä»ç‰¹å®šç« èŠ‚å¼€å§‹
uv run main.py --auto --start-from-chapter 3

# è·³è¿‡å·²å®Œæˆçš„æ­¥éª¤
uv run main.py --auto --skip-completed
```

**è¿›åº¦æ–‡ä»¶ç¤ºä¾‹ï¼š**
```json
{
  "project_id": "story_20241201_001",
  "total_chapters": 8,
  "completed_steps": {
    "text_analysis": true,
    "storyboard_generation": true,
    "image_generation": {
      "chapter_1": "completed",
      "chapter_2": "in_progress",
      "chapter_3": "pending"
    },
    "voice_synthesis": false,
    "video_composition": false
  },
  "last_updated": "2024-12-01T15:30:00Z"
}
```

### âš™ï¸ å‚æ•°è°ƒä¼˜æŒ‡å—

#### ğŸ¨ å›¾åƒç”Ÿæˆä¼˜åŒ–

**è´¨é‡ä¸é€Ÿåº¦å¹³è¡¡ï¼š**
```python
# é«˜è´¨é‡æ¨¡å¼ï¼ˆé€‚åˆæœ€ç»ˆè¾“å‡ºï¼‰
HIGH_QUALITY_CONFIG = {
    "sampling_steps": 30,
    "cfg_scale": 8.0,
    "sampler_name": "DPM++ 2M Karras",
    "enable_upscaling": True,
    "upscale_factor": 2,
    "denoising_strength": 0.7
}

# å¿«é€Ÿé¢„è§ˆæ¨¡å¼ï¼ˆé€‚åˆæµ‹è¯•ï¼‰
FAST_PREVIEW_CONFIG = {
    "sampling_steps": 15,
    "cfg_scale": 6.0,
    "sampler_name": "Euler a",
    "enable_upscaling": False,
    "width": 768,
    "height": 512
}

# å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰
BALANCED_CONFIG = {
    "sampling_steps": 20,
    "cfg_scale": 7.0,
    "sampler_name": "DPM++ 2M Karras",
    "enable_upscaling": True,
    "upscale_factor": 1.5
}
```

**LoRAæƒé‡è°ƒä¼˜ï¼š**
```json
{
  "è§’è‰²ä¸€è‡´æ€§è°ƒä¼˜": {
    "ä¸»è§’": {
      "lora_weight": 0.8,
      "trigger_words": ["specific_character"],
      "negative_prompts": ["different_character", "multiple_people"]
    },
    "é…è§’": {
      "lora_weight": 0.6,
      "trigger_words": ["supporting_character"],
      "blend_mode": "soft"
    }
  },
  "é£æ ¼ä¸€è‡´æ€§": {
    "art_style_lora": 0.7,
    "color_palette_lora": 0.5,
    "lighting_style_lora": 0.4
  }
}
```

#### ğŸ™ï¸ è¯­éŸ³åˆæˆä¼˜åŒ–

**æƒ…æ„Ÿè¡¨è¾¾é…ç½®ï¼š**
```python
# æ ¹æ®å†…å®¹ç±»å‹è°ƒæ•´è¯­éŸ³å‚æ•°
VOICE_EMOTION_CONFIG = {
    "narrative": {              # å™è¿°éƒ¨åˆ†
        "rate": "0%",
        "pitch": "+0Hz",
        "volume": "+0%",
        "style": "calm"
    },
    "dialogue": {              # å¯¹è¯éƒ¨åˆ†
        "rate": "+10%",
        "pitch": "+2Hz",
        "volume": "+5%",
        "style": "cheerful"
    },
    "action": {                # åŠ¨ä½œåœºæ™¯
        "rate": "+20%",
        "pitch": "+5Hz",
        "volume": "+10%",
        "style": "excited"
    },
    "suspense": {              # æ‚¬ç–‘åœºæ™¯
        "rate": "-10%",
        "pitch": "-2Hz",
        "volume": "-5%",
        "style": "whisper"
    }
}
```

**å¤šè§’è‰²è¯­éŸ³é…ç½®ï¼š**
```python
CHARACTER_VOICES = {
    "narrator": "zh-CN-XiaoxiaoNeural",     # æ—ç™½
    "protagonist": "zh-CN-XiaoyiNeural",   # ä¸»è§’
    "antagonist": "zh-CN-YunxiNeural",     # åæ´¾
    "child": "zh-CN-XiaochenNeural",       # å„¿ç«¥è§’è‰²
    "elder": "zh-CN-YunyangNeural"         # é•¿è€…è§’è‰²
}
```

#### ğŸ¬ è§†é¢‘åˆæˆä¼˜åŒ–

**æ€§èƒ½ä¼˜åŒ–é…ç½®ï¼š**
```python
# GPUåŠ é€Ÿè®¾ç½®
VIDEO_ACCELERATION = {
    "enable_gpu": True,
    "gpu_codec": "h264_nvenc",      # NVIDIA GPU
    "gpu_preset": "fast",          # ç¼–ç é¢„è®¾
    "gpu_memory_limit": "6GB"      # GPUå†…å­˜é™åˆ¶
}

# å¤šçº¿ç¨‹æ¸²æŸ“
RENDER_THREADS = {
    "video_threads": 4,             # è§†é¢‘å¤„ç†çº¿ç¨‹
    "audio_threads": 2,             # éŸ³é¢‘å¤„ç†çº¿ç¨‹
    "subtitle_threads": 1           # å­—å¹•å¤„ç†çº¿ç¨‹
}

# è´¨é‡é¢„è®¾
QUALITY_PRESETS = {
    "ultra": {
        "bitrate": "8000k",
        "crf": 18,
        "preset": "slow"
    },
    "high": {
        "bitrate": "5000k",
        "crf": 23,
        "preset": "medium"
    },
    "standard": {
        "bitrate": "3000k",
        "crf": 28,
        "preset": "fast"
    }
}
```

### ğŸ”§ æ•…éšœæ’é™¤æŒ‡å—

#### âŒ å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

**1. APIè¿æ¥é—®é¢˜**

```bash
# é”™è¯¯ä¿¡æ¯
ConnectionError: Failed to connect to OpenAI API

# è§£å†³æ–¹æ¡ˆ
# 1. æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.openai.com

# 2. éªŒè¯APIå¯†é’¥
export OPENAI_API_KEY="your_actual_key"
echo $OPENAI_API_KEY

# 3. æ£€æŸ¥APIé…é¢
curl -H "Authorization: Bearer $OPENAI_API_KEY" \
     https://api.openai.com/v1/usage

# 4. ä½¿ç”¨ä»£ç†ï¼ˆå¦‚éœ€è¦ï¼‰
export HTTP_PROXY="http://proxy.company.com:8080"
export HTTPS_PROXY="http://proxy.company.com:8080"
```

**2. Stable Diffusionè¿æ¥å¤±è´¥**

```bash
# é”™è¯¯ä¿¡æ¯
ConnectionError: Failed to connect to Stable Diffusion WebUI

# è§£å†³æ–¹æ¡ˆ
# 1. æ£€æŸ¥WebUIæ˜¯å¦è¿è¡Œ
curl http://127.0.0.1:7860/sdapi/v1/options

# 2. å¯åŠ¨WebUIï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
cd /path/to/stable-diffusion-webui
./webui.sh --api --listen

# 3. æ£€æŸ¥ç«¯å£é…ç½®
netstat -an | grep 7860

# 4. ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„åœ°å€
# åœ¨ .env æ–‡ä»¶ä¸­ï¼š
SD_API_BASE_URL="http://127.0.0.1:7860"
```

**3. å†…å­˜ä¸è¶³é—®é¢˜**

```bash
# é”™è¯¯ä¿¡æ¯
MemoryError: Unable to allocate memory for image generation

# è§£å†³æ–¹æ¡ˆ
# 1. å‡å°‘å¹¶å‘æ•°
MAX_CONCURRENT_IMAGES = 1

# 2. é™ä½å›¾åƒåˆ†è¾¨ç‡
IMAGE_WIDTH = 768
IMAGE_HEIGHT = 512

# 3. å¯ç”¨å†…å­˜ä¼˜åŒ–
ENABLE_MEMORY_OPTIMIZATION = True
CLEAR_CACHE_AFTER_GENERATION = True

# 4. ç›‘æ§å†…å­˜ä½¿ç”¨
htop  # æˆ– Activity Monitor (macOS)
```

**4. æ–‡ä»¶æƒé™é—®é¢˜**

```bash
# é”™è¯¯ä¿¡æ¯
PermissionError: [Errno 13] Permission denied

# è§£å†³æ–¹æ¡ˆ
# 1. æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la data/

# 2. ä¿®æ”¹æƒé™
chmod -R 755 data/
chown -R $USER:$USER data/

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# 4. åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p data/output/{chapters,images,audio,videos}
```

#### ğŸ” è°ƒè¯•æŠ€å·§

**å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š**
```bash
# åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½®
LOG_LEVEL=DEBUG
ENABLE_FILE_LOGGING=true
LOG_FILE_PATH="logs/story_flow.log"

# è¿è¡Œæ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/story_flow.log
```

**æ€§èƒ½åˆ†æï¼š**
```python
# åœ¨ src/config.py ä¸­å¯ç”¨
ENABLE_PROFILING = True
PROFILE_OUTPUT_DIR = "logs/profiles"

# åˆ†æç»“æœ
# ä¼šç”Ÿæˆ .prof æ–‡ä»¶ï¼Œå¯ç”¨ snakeviz æŸ¥çœ‹
pip install snakeviz
snakeviz logs/profiles/generation_profile.prof
```

**æµ‹è¯•æ¨¡å¼ï¼š**
```bash
# å¿«é€Ÿæµ‹è¯•æ¨¡å¼ï¼ˆä½¿ç”¨å°æ•°æ®é›†ï¼‰
uv run main.py --test-mode

# å•æ­¥è°ƒè¯•æ¨¡å¼
uv run main.py --debug --step-by-step

# è·³è¿‡è€—æ—¶æ­¥éª¤
uv run main.py --skip-image-generation --skip-video-composition
```

#### ğŸ“Š æ€§èƒ½ç›‘æ§

**ç³»ç»Ÿèµ„æºç›‘æ§ï¼š**
```python
# åœ¨å¤„ç†è¿‡ç¨‹ä¸­ç›‘æ§èµ„æºä½¿ç”¨
import psutil

def monitor_resources():
    cpu_percent = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    print(f"CPUä½¿ç”¨ç‡: {cpu_percent}%")
    print(f"å†…å­˜ä½¿ç”¨ç‡: {memory.percent}%")
    print(f"ç£ç›˜ä½¿ç”¨ç‡: {disk.percent}%")
```

**å¤„ç†æ—¶é—´åˆ†æï¼š**
```python
# å„æ¨¡å—å¤„ç†æ—¶é—´ç»Ÿè®¡
PROCESSING_TIMES = {
    "text_analysis": "00:00:15",
    "storyboard_generation": "00:02:30",
    "image_generation": "00:15:45",
    "voice_synthesis": "00:03:20",
    "video_composition": "00:08:10",
    "total_time": "00:30:00"
}
```

### ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

#### ğŸ¯ é¡¹ç›®è§„åˆ’

1. **å†…å®¹å‡†å¤‡**ï¼š
   - ç¡®ä¿æ•…äº‹ç»“æ„æ¸…æ™°ï¼Œç« èŠ‚åˆ’åˆ†åˆç†
   - é¢„å…ˆè§„åˆ’ä¸»è¦è§’è‰²å’Œåœºæ™¯
   - å‡†å¤‡è§’è‰²LoRAæ¨¡å‹å’Œè§¦å‘è¯

2. **èµ„æºé…ç½®**ï¼š
   - æ ¹æ®é¡¹ç›®è§„æ¨¡è°ƒæ•´å¹¶å‘æ•°å’Œå†…å­˜é™åˆ¶
   - é¢„ä¼°å¤„ç†æ—¶é—´å’Œå­˜å‚¨ç©ºé—´éœ€æ±‚
   - å‡†å¤‡å¤‡ç”¨APIå¯†é’¥å’ŒæœåŠ¡

3. **è´¨é‡æ§åˆ¶**ï¼š
   - å…ˆç”¨å¿«é€Ÿæ¨¡å¼æµ‹è¯•æ•´ä¸ªæµç¨‹
   - é€æ­¥æé«˜è´¨é‡å‚æ•°
   - å®šæœŸå¤‡ä»½ä¸­é—´ç»“æœ

#### ğŸš€ æ•ˆç‡ä¼˜åŒ–

1. **æ‰¹é‡å¤„ç†**ï¼š
   - åˆç†è®¾ç½®æ‰¹å¤„ç†å¤§å°
   - åˆ©ç”¨å¹¶å‘å¤„ç†èƒ½åŠ›
   - é¿å…é¢‘ç¹çš„APIè°ƒç”¨

2. **ç¼“å­˜ç­–ç•¥**ï¼š
   - å¯ç”¨ä¸­é—´ç»“æœç¼“å­˜
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - å¤ç”¨ç›¸ä¼¼åœºæ™¯çš„ç”Ÿæˆç»“æœ

3. **é”™è¯¯æ¢å¤**ï¼š
   - å¯ç”¨æ–­ç‚¹ç»­ä¼ åŠŸèƒ½
   - è®¾ç½®åˆç†çš„é‡è¯•æœºåˆ¶
   - ç›‘æ§å¤„ç†è¿›åº¦å’Œé”™è¯¯æ—¥å¿—

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶ç®¡ç†ä¸é¡¹ç›®ç»´æŠ¤

æœ¬ç« èŠ‚ä»‹ç»å¦‚ä½•æœ‰æ•ˆç®¡ç†Story Flowç”Ÿæˆçš„å„ç±»æ–‡ä»¶ï¼Œä»¥åŠé¡¹ç›®çš„æ—¥å¸¸ç»´æŠ¤å’Œä¼˜åŒ–ç­–ç•¥ã€‚

### ğŸ“‚ æ–‡ä»¶ç»“æ„ç®¡ç†

#### ğŸ—‚ï¸ æ ‡å‡†è¾“å‡ºç›®å½•ç»“æ„

Story Flowä¼šåœ¨ `data/output/` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š

```
data/output/
â”œâ”€â”€ chapters/                    # ç« èŠ‚æ–‡ä»¶
â”‚   â”œâ”€â”€ chapter_1.md
â”‚   â”œâ”€â”€ chapter_2.md
â”‚   â”œâ”€â”€ chapter_3.md
â”‚   â””â”€â”€ metadata.json
â”œâ”€â”€ storyboard/                  # æ•…äº‹æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ storyboard.csv
â”‚   â””â”€â”€ storyboard_analysis.json
â”œâ”€â”€ images/                      # ç”Ÿæˆçš„å›¾åƒ
â”‚   â”œâ”€â”€ image_001.png
â”‚   â”œâ”€â”€ image_002.png
â”‚   â”œâ”€â”€ image_003.png
â”‚   â”œâ”€â”€ thumbnails/              # ç¼©ç•¥å›¾
â”‚   â”‚   â”œâ”€â”€ thumb_001.jpg
â”‚   â”‚   â””â”€â”€ thumb_002.jpg
â”‚   â””â”€â”€ generation_log.json
â”œâ”€â”€ audio/                       # è¯­éŸ³æ–‡ä»¶
â”‚   â”œâ”€â”€ chapter_1.wav
â”‚   â”œâ”€â”€ chapter_2.wav
â”‚   â”œâ”€â”€ chapter_3.wav
â”‚   â””â”€â”€ synthesis_log.json
â”œâ”€â”€ videos/                      # è§†é¢‘æ–‡ä»¶
â”‚   â”œâ”€â”€ chapters/                # ç« èŠ‚è§†é¢‘
â”‚   â”‚   â”œâ”€â”€ chapter_1.mp4
â”‚   â”‚   â”œâ”€â”€ chapter_2.mp4
â”‚   â”‚   â””â”€â”€ chapter_3.mp4
â”‚   â”œâ”€â”€ final_video.mp4          # å®Œæ•´è§†é¢‘
â”‚   â”œâ”€â”€ subtitles/               # å­—å¹•æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ chapter_1.srt
â”‚   â”‚   â”œâ”€â”€ chapter_2.srt
â”‚   â”‚   â””â”€â”€ chapter_3.srt
â”‚   â””â”€â”€ composition_log.json
â”œâ”€â”€ temp/                        # ä¸´æ—¶æ–‡ä»¶
â”‚   â”œâ”€â”€ processing/
â”‚   â””â”€â”€ cache/
â””â”€â”€ backups/                     # å¤‡ä»½æ–‡ä»¶
    â”œâ”€â”€ 2024-12-01_backup/
    â””â”€â”€ 2024-12-02_backup/
```

#### ğŸ“Š æ–‡ä»¶å¤§å°ä¼°ç®—

**å…¸å‹é¡¹ç›®æ–‡ä»¶å¤§å°å‚è€ƒï¼š**

| æ–‡ä»¶ç±»å‹ | å•ä¸ªæ–‡ä»¶å¤§å° | 10ç« èŠ‚é¡¹ç›®æ€»å¤§å° | å¤‡æ³¨ |
|----------|-------------|-----------------|------|
| ç« èŠ‚æ–‡ä»¶(.md) | 2-10 KB | 50-100 KB | çº¯æ–‡æœ¬ï¼Œå ç”¨å¾ˆå° |
| æ•…äº‹æ¿æ–‡ä»¶(.csv) | 5-20 KB | 50-200 KB | ç»“æ„åŒ–æ•°æ® |
| å›¾åƒæ–‡ä»¶(.png) | 1-5 MB | 50-250 MB | å–å†³äºåˆ†è¾¨ç‡å’Œè´¨é‡ |
| éŸ³é¢‘æ–‡ä»¶(.wav) | 5-15 MB | 50-150 MB | å–å†³äºç« èŠ‚é•¿åº¦ |
| è§†é¢‘æ–‡ä»¶(.mp4) | 20-100 MB | 200MB-1GB | å–å†³äºè´¨é‡å’Œé•¿åº¦ |
| **é¡¹ç›®æ€»è®¡** | - | **350MB-1.5GB** | ä¸å«å¤‡ä»½å’Œä¸´æ—¶æ–‡ä»¶ |

### ğŸ§¹ æ–‡ä»¶æ¸…ç†ç­–ç•¥

#### ğŸ—‘ï¸ è‡ªåŠ¨æ¸…ç†é…ç½®

åœ¨ `src/config.py` ä¸­é…ç½®è‡ªåŠ¨æ¸…ç†ç­–ç•¥ï¼š

```python
# æ–‡ä»¶æ¸…ç†é…ç½®
FILE_CLEANUP_CONFIG = {
    "enable_auto_cleanup": True,
    "cleanup_interval_days": 7,        # æ¸…ç†é—´éš”ï¼ˆå¤©ï¼‰
    "keep_backups_count": 5,           # ä¿ç•™å¤‡ä»½æ•°é‡
    "temp_file_retention_hours": 24,   # ä¸´æ—¶æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼ˆå°æ—¶ï¼‰
    "log_file_retention_days": 30,     # æ—¥å¿—æ–‡ä»¶ä¿ç•™æ—¶é—´ï¼ˆå¤©ï¼‰
}

# æ¸…ç†è§„åˆ™
CLEANUP_RULES = {
    "temp_files": {
        "path": "data/output/temp/",
        "pattern": "*.tmp",
        "max_age_hours": 24
    },
    "cache_files": {
        "path": "data/output/temp/cache/",
        "pattern": "*",
        "max_age_hours": 72
    },
    "old_logs": {
        "path": "logs/",
        "pattern": "*.log.*",
        "max_age_days": 30
    },
    "failed_generations": {
        "path": "data/output/images/",
        "pattern": "failed_*.png",
        "max_age_hours": 48
    }
}
```

#### ğŸ”§ æ‰‹åŠ¨æ¸…ç†å‘½ä»¤

```bash
# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
uv run main.py --cleanup temp

# æ¸…ç†ç¼“å­˜æ–‡ä»¶
uv run main.py --cleanup cache

# æ¸…ç†æ—§æ—¥å¿—
uv run main.py --cleanup logs

# å…¨é¢æ¸…ç†ï¼ˆä¿ç•™é‡è¦æ–‡ä»¶ï¼‰
uv run main.py --cleanup all

# æ·±åº¦æ¸…ç†ï¼ˆåˆ é™¤æ‰€æœ‰éå¿…è¦æ–‡ä»¶ï¼‰
uv run main.py --cleanup deep --confirm
```

#### ğŸ“‹ æ¸…ç†è„šæœ¬ç¤ºä¾‹

åˆ›å»ºè‡ªå®šä¹‰æ¸…ç†è„šæœ¬ `scripts/cleanup.py`ï¼š

```python
#!/usr/bin/env python3
"""
æ–‡ä»¶æ¸…ç†è„šæœ¬
ç”¨æ³•: python scripts/cleanup.py [options]
"""

import os
import glob
import shutil
from datetime import datetime, timedelta
import argparse

def cleanup_old_files(directory, pattern, max_age_days):
    """æ¸…ç†æŒ‡å®šç›®å½•ä¸‹çš„æ—§æ–‡ä»¶"""
    cutoff_date = datetime.now() - timedelta(days=max_age_days)
    files_removed = 0
    
    for file_path in glob.glob(os.path.join(directory, pattern)):
        if os.path.isfile(file_path):
            file_mtime = datetime.fromtimestamp(os.path.getmtime(file_path))
            if file_mtime < cutoff_date:
                os.remove(file_path)
                files_removed += 1
                print(f"å·²åˆ é™¤: {file_path}")
    
    return files_removed

def cleanup_empty_directories(root_dir):
    """æ¸…ç†ç©ºç›®å½•"""
    dirs_removed = 0
    for root, dirs, files in os.walk(root_dir, topdown=False):
        for dir_name in dirs:
            dir_path = os.path.join(root, dir_name)
            try:
                if not os.listdir(dir_path):  # ç›®å½•ä¸ºç©º
                    os.rmdir(dir_path)
                    dirs_removed += 1
                    print(f"å·²åˆ é™¤ç©ºç›®å½•: {dir_path}")
            except OSError:
                pass  # ç›®å½•ä¸ä¸ºç©ºæˆ–æ— æƒé™
    
    return dirs_removed

def get_directory_size(directory):
    """è·å–ç›®å½•å¤§å°"""
    total_size = 0
    for root, dirs, files in os.walk(directory):
        for file in files:
            file_path = os.path.join(root, file)
            if os.path.exists(file_path):
                total_size += os.path.getsize(file_path)
    return total_size

def format_size(size_bytes):
    """æ ¼å¼åŒ–æ–‡ä»¶å¤§å°"""
    for unit in ['B', 'KB', 'MB', 'GB']:
        if size_bytes < 1024.0:
            return f"{size_bytes:.1f} {unit}"
        size_bytes /= 1024.0
    return f"{size_bytes:.1f} TB"

def main():
    parser = argparse.ArgumentParser(description='Story Flow æ–‡ä»¶æ¸…ç†å·¥å…·')
    parser.add_argument('--dry-run', action='store_true', help='é¢„è§ˆæ¨¡å¼ï¼Œä¸å®é™…åˆ é™¤æ–‡ä»¶')
    parser.add_argument('--temp', action='store_true', help='æ¸…ç†ä¸´æ—¶æ–‡ä»¶')
    parser.add_argument('--cache', action='store_true', help='æ¸…ç†ç¼“å­˜æ–‡ä»¶')
    parser.add_argument('--logs', action='store_true', help='æ¸…ç†æ—§æ—¥å¿—')
    parser.add_argument('--all', action='store_true', help='æ‰§è¡Œå…¨é¢æ¸…ç†')
    
    args = parser.parse_args()
    
    print("=== Story Flow æ–‡ä»¶æ¸…ç†å·¥å…· ===")
    
    # æ˜¾ç¤ºæ¸…ç†å‰çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
    output_dir = "data/output"
    if os.path.exists(output_dir):
        before_size = get_directory_size(output_dir)
        print(f"æ¸…ç†å‰è¾“å‡ºç›®å½•å¤§å°: {format_size(before_size)}")
    
    total_files_removed = 0
    total_dirs_removed = 0
    
    if args.temp or args.all:
        print("\næ¸…ç†ä¸´æ—¶æ–‡ä»¶...")
        files_removed = cleanup_old_files("data/output/temp", "*", 1)
        total_files_removed += files_removed
        print(f"æ¸…ç†äº† {files_removed} ä¸ªä¸´æ—¶æ–‡ä»¶")
    
    if args.cache or args.all:
        print("\næ¸…ç†ç¼“å­˜æ–‡ä»¶...")
        files_removed = cleanup_old_files("data/output/temp/cache", "*", 3)
        total_files_removed += files_removed
        print(f"æ¸…ç†äº† {files_removed} ä¸ªç¼“å­˜æ–‡ä»¶")
    
    if args.logs or args.all:
        print("\næ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶...")
        files_removed = cleanup_old_files("logs", "*.log.*", 30)
        total_files_removed += files_removed
        print(f"æ¸…ç†äº† {files_removed} ä¸ªæ—¥å¿—æ–‡ä»¶")
    
    if args.all:
        print("\næ¸…ç†ç©ºç›®å½•...")
        dirs_removed = cleanup_empty_directories("data/output")
        total_dirs_removed += dirs_removed
        print(f"æ¸…ç†äº† {dirs_removed} ä¸ªç©ºç›®å½•")
    
    # æ˜¾ç¤ºæ¸…ç†åçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
    if os.path.exists(output_dir):
        after_size = get_directory_size(output_dir)
        saved_size = before_size - after_size
        print(f"\næ¸…ç†åè¾“å‡ºç›®å½•å¤§å°: {format_size(after_size)}")
        print(f"èŠ‚çœç£ç›˜ç©ºé—´: {format_size(saved_size)}")
    
    print(f"\næ¸…ç†å®Œæˆï¼")
    print(f"åˆ é™¤æ–‡ä»¶: {total_files_removed} ä¸ª")
    print(f"åˆ é™¤ç›®å½•: {total_dirs_removed} ä¸ª")

if __name__ == "__main__":
    main()
```

### ğŸ’¾ å¤‡ä»½ç­–ç•¥

#### ğŸ”„ è‡ªåŠ¨å¤‡ä»½é…ç½®

```python
# å¤‡ä»½é…ç½®
BACKUP_CONFIG = {
    "enable_auto_backup": True,
    "backup_interval_hours": 6,        # å¤‡ä»½é—´éš”ï¼ˆå°æ—¶ï¼‰
    "backup_retention_days": 30,       # å¤‡ä»½ä¿ç•™æ—¶é—´ï¼ˆå¤©ï¼‰
    "backup_compression": True,        # å¯ç”¨å‹ç¼©
    "backup_location": "data/backups", # å¤‡ä»½ä½ç½®
    "remote_backup": {                 # è¿œç¨‹å¤‡ä»½ï¼ˆå¯é€‰ï¼‰
        "enabled": False,
        "provider": "s3",              # s3, gdrive, dropbox
        "bucket": "story-flow-backups",
        "access_key": "AKIA****************",
        "secret_key": "****************************************"
    }
}

# å¤‡ä»½å†…å®¹é…ç½®
BACKUP_INCLUDES = [
    "input.md",                        # è¾“å…¥æ–‡ä»¶
    "character_mapping.json",         # è§’è‰²æ˜ å°„
    "data/output/chapters/",          # ç« èŠ‚æ–‡ä»¶
    "data/output/storyboard/",        # æ•…äº‹æ¿
    "data/output/images/",            # å›¾åƒï¼ˆå¯é€‰ï¼‰
    "data/output/audio/",             # éŸ³é¢‘ï¼ˆå¯é€‰ï¼‰
    "data/output/videos/final_video.mp4", # æœ€ç»ˆè§†é¢‘
    ".env",                           # ç¯å¢ƒé…ç½®ï¼ˆæ•æ„Ÿä¿¡æ¯éœ€åŠ å¯†ï¼‰
]

BACKUP_EXCLUDES = [
    "data/output/temp/",              # ä¸´æ—¶æ–‡ä»¶
    "data/output/cache/",             # ç¼“å­˜æ–‡ä»¶
    "logs/",                          # æ—¥å¿—æ–‡ä»¶
    "*.tmp",                          # ä¸´æ—¶æ–‡ä»¶
    "*.log",                          # æ—¥å¿—æ–‡ä»¶
]
```

#### ğŸ“¦ å¤‡ä»½è„šæœ¬

åˆ›å»ºå¤‡ä»½è„šæœ¬ `scripts/backup.py`ï¼š

```python
#!/usr/bin/env python3
"""
é¡¹ç›®å¤‡ä»½è„šæœ¬
ç”¨æ³•: python scripts/backup.py [options]
"""

import os
import shutil
import tarfile
import gzip
from datetime import datetime
import argparse
import json

def create_backup(backup_name=None, compress=True):
    """åˆ›å»ºé¡¹ç›®å¤‡ä»½"""
    if not backup_name:
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_name = f"story_flow_backup_{timestamp}"
    
    backup_dir = f"data/backups/{backup_name}"
    os.makedirs(backup_dir, exist_ok=True)
    
    # å¤‡ä»½æ–‡ä»¶åˆ—è¡¨
    files_to_backup = [
        "input.md",
        "character_mapping.json",
        "data/output/chapters/",
        "data/output/storyboard/",
        "data/output/images/",
        "data/output/audio/",
        "data/output/videos/final_video.mp4"
    ]
    
    backup_info = {
        "backup_name": backup_name,
        "created_at": datetime.now().isoformat(),
        "files": [],
        "total_size": 0
    }
    
    print(f"åˆ›å»ºå¤‡ä»½: {backup_name}")
    
    for item in files_to_backup:
        if os.path.exists(item):
            dest_path = os.path.join(backup_dir, item)
            os.makedirs(os.path.dirname(dest_path), exist_ok=True)
            
            if os.path.isfile(item):
                shutil.copy2(item, dest_path)
                size = os.path.getsize(item)
            else:
                shutil.copytree(item, dest_path, dirs_exist_ok=True)
                size = get_directory_size(item)
            
            backup_info["files"].append({
                "path": item,
                "size": size,
                "type": "file" if os.path.isfile(item) else "directory"
            })
            backup_info["total_size"] += size
            
            print(f"  å·²å¤‡ä»½: {item} ({format_size(size)})")
    
    # ä¿å­˜å¤‡ä»½ä¿¡æ¯
    with open(os.path.join(backup_dir, "backup_info.json"), "w", encoding="utf-8") as f:
        json.dump(backup_info, f, indent=2, ensure_ascii=False)
    
    # å‹ç¼©å¤‡ä»½ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    if compress:
        archive_path = f"{backup_dir}.tar.gz"
        with tarfile.open(archive_path, "w:gz") as tar:
            tar.add(backup_dir, arcname=backup_name)
        
        # åˆ é™¤æœªå‹ç¼©çš„å¤‡ä»½ç›®å½•
        shutil.rmtree(backup_dir)
        
        archive_size = os.path.getsize(archive_path)
        print(f"\nå¤‡ä»½å·²å‹ç¼©: {archive_path}")
        print(f"å‹ç¼©åå¤§å°: {format_size(archive_size)}")
        print(f"å‹ç¼©ç‡: {(1 - archive_size / backup_info['total_size']) * 100:.1f}%")
    
    print(f"\nå¤‡ä»½å®Œæˆï¼æ€»å¤§å°: {format_size(backup_info['total_size'])}")
    return backup_name

def restore_backup(backup_name, target_dir="."):
    """æ¢å¤å¤‡ä»½"""
    backup_path = f"data/backups/{backup_name}"
    archive_path = f"{backup_path}.tar.gz"
    
    if os.path.exists(archive_path):
        print(f"æ¢å¤å‹ç¼©å¤‡ä»½: {archive_path}")
        with tarfile.open(archive_path, "r:gz") as tar:
            tar.extractall(path="data/backups")
        backup_path = f"data/backups/{backup_name}"
    
    if not os.path.exists(backup_path):
        print(f"é”™è¯¯: å¤‡ä»½ä¸å­˜åœ¨ {backup_path}")
        return False
    
    # è¯»å–å¤‡ä»½ä¿¡æ¯
    info_file = os.path.join(backup_path, "backup_info.json")
    if os.path.exists(info_file):
        with open(info_file, "r", encoding="utf-8") as f:
            backup_info = json.load(f)
        print(f"æ¢å¤å¤‡ä»½: {backup_info['backup_name']}")
        print(f"åˆ›å»ºæ—¶é—´: {backup_info['created_at']}")
    
    # æ¢å¤æ–‡ä»¶
    for root, dirs, files in os.walk(backup_path):
        for file in files:
            if file == "backup_info.json":
                continue
            
            src_path = os.path.join(root, file)
            rel_path = os.path.relpath(src_path, backup_path)
            dest_path = os.path.join(target_dir, rel_path)
            
            os.makedirs(os.path.dirname(dest_path), exist_ok=True)
            shutil.copy2(src_path, dest_path)
            print(f"  å·²æ¢å¤: {rel_path}")
    
    print("\nå¤‡ä»½æ¢å¤å®Œæˆï¼")
    return True

def list_backups():
    """åˆ—å‡ºæ‰€æœ‰å¤‡ä»½"""
    backup_dir = "data/backups"
    if not os.path.exists(backup_dir):
        print("æ²¡æœ‰æ‰¾åˆ°å¤‡ä»½ç›®å½•")
        return
    
    backups = []
    
    # æŸ¥æ‰¾å‹ç¼©å¤‡ä»½
    for file in os.listdir(backup_dir):
        if file.endswith(".tar.gz"):
            backup_name = file[:-7]  # ç§»é™¤ .tar.gz
            file_path = os.path.join(backup_dir, file)
            size = os.path.getsize(file_path)
            mtime = datetime.fromtimestamp(os.path.getmtime(file_path))
            
            backups.append({
                "name": backup_name,
                "type": "compressed",
                "size": size,
                "created": mtime
            })
    
    # æŸ¥æ‰¾æœªå‹ç¼©å¤‡ä»½
    for item in os.listdir(backup_dir):
        item_path = os.path.join(backup_dir, item)
        if os.path.isdir(item_path) and not item.endswith(".tar.gz"):
            size = get_directory_size(item_path)
            mtime = datetime.fromtimestamp(os.path.getmtime(item_path))
            
            backups.append({
                "name": item,
                "type": "directory",
                "size": size,
                "created": mtime
            })
    
    if not backups:
        print("æ²¡æœ‰æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶")
        return
    
    # æŒ‰åˆ›å»ºæ—¶é—´æ’åº
    backups.sort(key=lambda x: x["created"], reverse=True)
    
    print("\nå¯ç”¨å¤‡ä»½åˆ—è¡¨:")
    print("-" * 80)
    print(f"{'å¤‡ä»½åç§°':<30} {'ç±»å‹':<10} {'å¤§å°':<15} {'åˆ›å»ºæ—¶é—´':<20}")
    print("-" * 80)
    
    for backup in backups:
        print(f"{backup['name']:<30} {backup['type']:<10} {format_size(backup['size']):<15} {backup['created'].strftime('%Y-%m-%d %H:%M:%S'):<20}")

def get_directory_size(directory):
    """è·å–ç›®å½•å¤§å°"""
    total_size = 0
    for root, dirs, files in os.walk(directory):
        for file in files:
            file_path = os.path.join(root, file)
            if os.path.exists(file_path):
                total_size += os.path.getsize(file_path)
    return total_size

def format_size(size_bytes):
    """æ ¼å¼åŒ–æ–‡ä»¶å¤§å°"""
    for unit in ['B', 'KB', 'MB', 'GB']:
        if size_bytes < 1024.0:
            return f"{size_bytes:.1f} {unit}"
        size_bytes /= 1024.0
    return f"{size_bytes:.1f} TB"

def main():
    parser = argparse.ArgumentParser(description='Story Flow å¤‡ä»½å·¥å…·')
    parser.add_argument('action', choices=['create', 'restore', 'list'], help='æ“ä½œç±»å‹')
    parser.add_argument('--name', help='å¤‡ä»½åç§°')
    parser.add_argument('--no-compress', action='store_true', help='ä¸å‹ç¼©å¤‡ä»½')
    parser.add_argument('--target', default='.', help='æ¢å¤ç›®æ ‡ç›®å½•')
    
    args = parser.parse_args()
    
    if args.action == 'create':
        create_backup(args.name, not args.no_compress)
    elif args.action == 'restore':
        if not args.name:
            print("é”™è¯¯: æ¢å¤å¤‡ä»½éœ€è¦æŒ‡å®šå¤‡ä»½åç§°")
            return
        restore_backup(args.name, args.target)
    elif args.action == 'list':
        list_backups()

if __name__ == "__main__":
    main()
```

### ğŸ”§ é¡¹ç›®ç»´æŠ¤

#### ğŸ“… å®šæœŸç»´æŠ¤ä»»åŠ¡

**æ¯æ—¥ç»´æŠ¤ï¼š**
```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
uv run main.py --health-check

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
python scripts/cleanup.py --temp

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

**æ¯å‘¨ç»´æŠ¤ï¼š**
```bash
# åˆ›å»ºå¤‡ä»½
python scripts/backup.py create

# å…¨é¢æ¸…ç†
python scripts/cleanup.py --all

# æ›´æ–°ä¾èµ–
uv sync
```

**æ¯æœˆç»´æŠ¤ï¼š**
```bash
# æ¸…ç†æ—§å¤‡ä»½
find data/backups -name "*.tar.gz" -mtime +30 -delete

# æ£€æŸ¥é…ç½®æ–‡ä»¶
uv run main.py --validate-config

# æ€§èƒ½åˆ†æ
uv run main.py --performance-report
```

#### ğŸ” å¥åº·æ£€æŸ¥è„šæœ¬

åˆ›å»ºå¥åº·æ£€æŸ¥è„šæœ¬ `scripts/health_check.py`ï¼š

```python
#!/usr/bin/env python3
"""
ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬
"""

import os
import sys
import json
import requests
from datetime import datetime

def check_dependencies():
    """æ£€æŸ¥ä¾èµ–é¡¹"""
    print("æ£€æŸ¥ä¾èµ–é¡¹...")
    
    required_packages = [
        'openai', 'requests', 'pillow', 'opencv-python',
        'azure-cognitiveservices-speech', 'moviepy'
    ]
    
    missing_packages = []
    for package in required_packages:
        try:
            __import__(package.replace('-', '_'))
            print(f"  âœ“ {package}")
        except ImportError:
            print(f"  âœ— {package} (ç¼ºå¤±)")
            missing_packages.append(package)
    
    return len(missing_packages) == 0

def check_api_connections():
    """æ£€æŸ¥APIè¿æ¥"""
    print("\næ£€æŸ¥APIè¿æ¥...")
    
    # æ£€æŸ¥OpenAI API
    openai_key = os.getenv('OPENAI_API_KEY')
    if openai_key:
        try:
            headers = {'Authorization': f'Bearer {openai_key}'}
            response = requests.get('https://api.openai.com/v1/models', headers=headers, timeout=10)
            if response.status_code == 200:
                print("  âœ“ OpenAI API è¿æ¥æ­£å¸¸")
            else:
                print(f"  âœ— OpenAI API è¿æ¥å¤±è´¥ (çŠ¶æ€ç : {response.status_code})")
        except Exception as e:
            print(f"  âœ— OpenAI API è¿æ¥å¤±è´¥: {e}")
    else:
        print("  âš  OpenAI API å¯†é’¥æœªé…ç½®")
    
    # æ£€æŸ¥Stable Diffusion API
    sd_url = os.getenv('SD_API_BASE_URL', 'http://127.0.0.1:7860')
    try:
        response = requests.get(f'{sd_url}/sdapi/v1/options', timeout=5)
        if response.status_code == 200:
            print("  âœ“ Stable Diffusion API è¿æ¥æ­£å¸¸")
        else:
            print(f"  âœ— Stable Diffusion API è¿æ¥å¤±è´¥ (çŠ¶æ€ç : {response.status_code})")
    except Exception as e:
        print(f"  âœ— Stable Diffusion API è¿æ¥å¤±è´¥: {e}")
    
    # æ£€æŸ¥Azure Speech API
    azure_key = os.getenv('AZURE_SPEECH_KEY')
    if azure_key:
        print("  âœ“ Azure Speech API å¯†é’¥å·²é…ç½®")
    else:
        print("  âš  Azure Speech API å¯†é’¥æœªé…ç½®")

def check_disk_space():
    """æ£€æŸ¥ç£ç›˜ç©ºé—´"""
    print("\næ£€æŸ¥ç£ç›˜ç©ºé—´...")
    
    import shutil
    total, used, free = shutil.disk_usage(".")
    
    print(f"  æ€»ç©ºé—´: {format_size(total)}")
    print(f"  å·²ä½¿ç”¨: {format_size(used)} ({used/total*100:.1f}%)")
    print(f"  å¯ç”¨ç©ºé—´: {format_size(free)} ({free/total*100:.1f}%)")
    
    if free < 1024**3:  # å°äº1GB
        print("  âš  ç£ç›˜ç©ºé—´ä¸è¶³ï¼Œå»ºè®®æ¸…ç†æ–‡ä»¶")
        return False
    else:
        print("  âœ“ ç£ç›˜ç©ºé—´å……è¶³")
        return True

def check_output_directory():
    """æ£€æŸ¥è¾“å‡ºç›®å½•ç»“æ„"""
    print("\næ£€æŸ¥è¾“å‡ºç›®å½•ç»“æ„...")
    
    required_dirs = [
        'data/output/chapters',
        'data/output/images',
        'data/output/audio',
        'data/output/videos',
        'data/output/temp',
        'data/backups',
        'logs'
    ]
    
    all_exist = True
    for dir_path in required_dirs:
        if os.path.exists(dir_path):
            print(f"  âœ“ {dir_path}")
        else:
            print(f"  âœ— {dir_path} (ä¸å­˜åœ¨)")
            all_exist = False
            # è‡ªåŠ¨åˆ›å»ºç›®å½•
            os.makedirs(dir_path, exist_ok=True)
            print(f"    å·²åˆ›å»ºç›®å½•: {dir_path}")
    
    return all_exist

def format_size(size_bytes):
    """æ ¼å¼åŒ–æ–‡ä»¶å¤§å°"""
    for unit in ['B', 'KB', 'MB', 'GB', 'TB']:
        if size_bytes < 1024.0:
            return f"{size_bytes:.1f} {unit}"
        size_bytes /= 1024.0
    return f"{size_bytes:.1f} PB"

def generate_health_report():
    """ç”Ÿæˆå¥åº·æ£€æŸ¥æŠ¥å‘Š"""
    print("\n=== Story Flow ç³»ç»Ÿå¥åº·æ£€æŸ¥æŠ¥å‘Š ===")
    print(f"æ£€æŸ¥æ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print("=" * 50)
    
    checks = {
        "ä¾èµ–é¡¹æ£€æŸ¥": check_dependencies(),
        "ç£ç›˜ç©ºé—´æ£€æŸ¥": check_disk_space(),
        "è¾“å‡ºç›®å½•æ£€æŸ¥": check_output_directory()
    }
    
    check_api_connections()
    
    print("\n=== æ£€æŸ¥ç»“æœæ±‡æ€» ===")
    all_passed = True
    for check_name, result in checks.items():
        status = "âœ“ é€šè¿‡" if result else "âœ— å¤±è´¥"
        print(f"{check_name}: {status}")
        if not result:
            all_passed = False
    
    if all_passed:
        print("\nğŸ‰ ç³»ç»ŸçŠ¶æ€è‰¯å¥½ï¼")
        return 0
    else:
        print("\nâš ï¸  å‘ç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä¸Šè¿°å¤±è´¥é¡¹ç›®")
        return 1

if __name__ == "__main__":
    sys.exit(generate_health_report())
```

#### ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

**å­˜å‚¨ä¼˜åŒ–ï¼š**
1. å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
2. å‹ç¼©æ—§çš„å¤‡ä»½æ–‡ä»¶
3. ä½¿ç”¨SSDå­˜å‚¨æé«˜I/Oæ€§èƒ½
4. è€ƒè™‘ä½¿ç”¨å¤–éƒ¨å­˜å‚¨æœåŠ¡ï¼ˆå¦‚äº‘å­˜å‚¨ï¼‰

**å†…å­˜ä¼˜åŒ–ï¼š**
1. è°ƒæ•´å¹¶å‘å¤„ç†æ•°é‡
2. å¯ç”¨å†…å­˜ä¼˜åŒ–é€‰é¡¹
3. å®šæœŸé‡å¯é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹
4. ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ

**ç½‘ç»œä¼˜åŒ–ï¼š**
1. ä½¿ç”¨CDNåŠ é€ŸAPIè®¿é—®
2. é…ç½®åˆç†çš„è¶…æ—¶å’Œé‡è¯•æœºåˆ¶
3. å¯ç”¨è¯·æ±‚ç¼“å­˜
4. è€ƒè™‘ä½¿ç”¨ä»£ç†æœåŠ¡å™¨

---

## â“ å¸¸è§é—®é¢˜è§£ç­” (FAQ)

### ğŸ”§ å®‰è£…å’Œé…ç½®é—®é¢˜

**Q: å®‰è£…ä¾èµ–æ—¶å‡ºç°é”™è¯¯æ€ä¹ˆåŠï¼Ÿ**
A: 
1. ç¡®ä¿ä½¿ç”¨ `uv` è€Œä¸æ˜¯ `pip`
2. æ£€æŸ¥Pythonç‰ˆæœ¬æ˜¯å¦ä¸º3.8+
3. å°è¯•æ¸…ç†ç¼“å­˜ï¼š`uv cache clean`
4. å¦‚æœæ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥é…ç½®é•œåƒæº

**Q: APIå¯†é’¥é…ç½®åä»ç„¶æŠ¥é”™ï¼Ÿ**
A:
1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•
2. ç¡®è®¤å¯†é’¥æ ¼å¼æ­£ç¡®ï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºæ ¼
3. éªŒè¯APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿçš„é…é¢
4. é‡å¯ç¨‹åºä»¥é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡

**Q: Stable Diffusionè¿æ¥å¤±è´¥ï¼Ÿ**
A:
1. ç¡®è®¤Stable Diffusion WebUIå·²å¯åŠ¨
2. æ£€æŸ¥ç«¯å£å·æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤7860ï¼‰
3. ç¡®è®¤é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢è¿æ¥
4. å°è¯•åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://127.0.0.1:7860`

### ğŸ¨ ç”Ÿæˆè´¨é‡é—®é¢˜

**Q: ç”Ÿæˆçš„æ•…äº‹è´¨é‡ä¸ç†æƒ³ï¼Ÿ**
A:
1. ä¼˜åŒ–æ•…äº‹ä¸»é¢˜æè¿°ï¼Œæä¾›æ›´å¤šç»†èŠ‚
2. å°è¯•ä¸åŒçš„AIæ¨¡å‹ï¼ˆGPT-4 vs GPT-3.5ï¼‰
3. è°ƒæ•´ç”Ÿæˆå‚æ•°ï¼ˆæ¸©åº¦ã€æœ€å¤§é•¿åº¦ç­‰ï¼‰
4. å¤šæ¬¡ç”Ÿæˆå¹¶é€‰æ‹©æœ€ä½³ç»“æœ

**Q: å›¾åƒç”Ÿæˆæ•ˆæœä¸å¥½ï¼Ÿ**
A:
1. ä¼˜åŒ–æç¤ºè¯ï¼Œä½¿ç”¨æ›´å…·ä½“çš„æè¿°
2. è°ƒæ•´å›¾åƒç”Ÿæˆå‚æ•°ï¼ˆæ­¥æ•°ã€CFG Scaleï¼‰
3. å°è¯•ä¸åŒçš„LoRAæ¨¡å‹
4. æ£€æŸ¥è§’è‰²æ˜ å°„é…ç½®æ˜¯å¦æ­£ç¡®

**Q: è¯­éŸ³åˆæˆå¬èµ·æ¥ä¸è‡ªç„¶ï¼Ÿ**
A:
1. è°ƒæ•´è¯­éŸ³å‚æ•°ï¼ˆè¯­é€Ÿã€éŸ³è°ƒï¼‰
2. å°è¯•ä¸åŒçš„è¯­éŸ³æ¨¡å‹
3. ä¼˜åŒ–æ–‡æœ¬å†…å®¹ï¼Œé¿å…è¿‡é•¿çš„å¥å­
4. æ£€æŸ¥æ ‡ç‚¹ç¬¦å·æ˜¯å¦æ­£ç¡®

### ğŸš€ æ€§èƒ½é—®é¢˜

**Q: å¤„ç†é€Ÿåº¦å¾ˆæ…¢ï¼Ÿ**
A:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥é€Ÿåº¦
2. è°ƒæ•´å¹¶å‘å¤„ç†æ•°é‡
3. ä½¿ç”¨æ›´å¿«çš„ç¡¬ä»¶ï¼ˆSSDã€æ›´å¤šå†…å­˜ï¼‰
4. å¯ç”¨ç¼“å­˜åŠŸèƒ½

**Q: å†…å­˜ä¸è¶³é”™è¯¯ï¼Ÿ**
A:
1. å‡å°‘å¹¶å‘å¤„ç†æ•°é‡
2. é™ä½å›¾åƒåˆ†è¾¨ç‡
3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶
4. å¢åŠ ç³»ç»Ÿå†…å­˜æˆ–ä½¿ç”¨è™šæ‹Ÿå†…å­˜

**Q: ç£ç›˜ç©ºé—´ä¸è¶³ï¼Ÿ**
A:
1. è¿è¡Œæ¸…ç†è„šæœ¬ï¼š`python scripts/cleanup.py --all`
2. åˆ é™¤ä¸éœ€è¦çš„å¤‡ä»½æ–‡ä»¶
3. å‹ç¼©æˆ–ç§»åŠ¨å¤§æ–‡ä»¶åˆ°å¤–éƒ¨å­˜å‚¨
4. è°ƒæ•´è¾“å‡ºè´¨é‡è®¾ç½®

### ğŸ“ æ–‡ä»¶ç®¡ç†é—®é¢˜

**Q: æ‰¾ä¸åˆ°ç”Ÿæˆçš„æ–‡ä»¶ï¼Ÿ**
A:
1. æ£€æŸ¥ `data/output/` ç›®å½•
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£å¤„ç†çŠ¶æ€
3. ç¡®è®¤å¤„ç†è¿‡ç¨‹æ˜¯å¦å®Œæˆ
4. æ£€æŸ¥æ–‡ä»¶æƒé™è®¾ç½®

**Q: å¦‚ä½•æ¢å¤æ„å¤–åˆ é™¤çš„æ–‡ä»¶ï¼Ÿ**
A:
1. æ£€æŸ¥ `data/backups/` ç›®å½•
2. ä½¿ç”¨å¤‡ä»½æ¢å¤ï¼š`python scripts/backup.py restore --name backup_name`
3. æŸ¥çœ‹ç³»ç»Ÿå›æ”¶ç«™
4. ä½¿ç”¨æ–‡ä»¶æ¢å¤å·¥å…·

---

## ğŸ“š é™„å½•

### ğŸ“– ç›¸å…³èµ„æº

**å®˜æ–¹æ–‡æ¡£ï¼š**
- [OpenAI API æ–‡æ¡£](https://platform.openai.com/docs)
- [Stable Diffusion WebUI](https://github.com/AUTOMATIC1111/stable-diffusion-webui)
- [Azure Speech Services](https://docs.microsoft.com/azure/cognitive-services/speech-service/)

**ç¤¾åŒºèµ„æºï¼š**
- [Story Flow GitHub ä»“åº“](https://github.com/story-flow/story-flow)
- [ç”¨æˆ·äº¤æµç¾¤](https://discord.gg/story-flow)
- [é—®é¢˜åé¦ˆ](https://github.com/story-flow/story-flow/issues)

**å­¦ä¹ èµ„æºï¼š**
- [AIç»˜ç”»æç¤ºè¯æŒ‡å—](https://prompthero.com/)
- [è§†é¢‘åˆ¶ä½œæ•™ç¨‹](https://www.youtube.com/playlist?list=story-flow-tutorials)
- [æœ€ä½³å®è·µæ¡ˆä¾‹](https://github.com/story-flow/story-flow/wiki/best-practices)

### ğŸ”„ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

**v2.0.0 (2024-12-01)**
- æ–°å¢å¤šç« èŠ‚æ‰¹é‡å¤„ç†åŠŸèƒ½
- ä¼˜åŒ–å›¾åƒç”Ÿæˆè´¨é‡
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- æ·»åŠ è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½

**v1.5.0 (2024-11-15)**
- æ”¯æŒè‡ªå®šä¹‰è§’è‰²LoRAæ¨¡å‹
- æ–°å¢è§†é¢‘å­—å¹•åŠŸèƒ½
- ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- ä¿®å¤å·²çŸ¥bug

**v1.0.0 (2024-10-01)**
- é¦–ä¸ªæ­£å¼ç‰ˆæœ¬å‘å¸ƒ
- å®Œæ•´çš„æ•…äº‹ç”Ÿæˆæµæ°´çº¿
- åŸºç¡€çš„å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç”ŸæˆåŠŸèƒ½

### ğŸ“ æŠ€æœ¯æ”¯æŒ

**è·å–å¸®åŠ©çš„æ–¹å¼ï¼š**

1. **æŸ¥çœ‹æ–‡æ¡£**ï¼šé¦–å…ˆæŸ¥é˜…æœ¬æ•™ç¨‹å’Œå®˜æ–¹æ–‡æ¡£
2. **æœç´¢é—®é¢˜**ï¼šåœ¨GitHub Issuesä¸­æœç´¢ç±»ä¼¼é—®é¢˜
3. **ç¤¾åŒºæ±‚åŠ©**ï¼šåœ¨ç”¨æˆ·äº¤æµç¾¤ä¸­æé—®
4. **æäº¤Issue**ï¼šåœ¨GitHubä¸Šæäº¤è¯¦ç»†çš„é—®é¢˜æŠ¥å‘Š
5. **è”ç³»å¼€å‘è€…**ï¼šé€šè¿‡é‚®ä»¶è”ç³»æŠ€æœ¯æ”¯æŒ

**æäº¤é—®é¢˜æ—¶è¯·åŒ…å«ï¼š**
- æ“ä½œç³»ç»Ÿå’ŒPythonç‰ˆæœ¬
- Story Flowç‰ˆæœ¬å·
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—
- å¤ç°æ­¥éª¤
- ç›¸å…³é…ç½®æ–‡ä»¶ï¼ˆå»é™¤æ•æ„Ÿä¿¡æ¯ï¼‰

**è”ç³»æ–¹å¼ï¼š**
- ğŸ“§ é‚®ç®±ï¼šsupport@story-flow.com
- ğŸ’¬ Discordï¼š[Story Flow Community](https://discord.gg/story-flow)
- ğŸ› GitHub Issuesï¼š[æäº¤é—®é¢˜](https://github.com/story-flow/story-flow/issues)
- ğŸ“± å¾®ä¿¡ç¾¤ï¼šæ‰«æäºŒç»´ç åŠ å…¥ç”¨æˆ·ç¾¤

---

## ğŸ‰ ç»“è¯­

æ­å–œæ‚¨å®Œæˆäº†Story Flowç”¨æˆ·æ“ä½œæ•™ç¨‹çš„å­¦ä¹ ï¼

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨å·²ç»æŒæ¡äº†ï¼š
- âœ… Story Flowçš„åŸºæœ¬æ¦‚å¿µå’Œæ ¸å¿ƒåŠŸèƒ½
- âœ… å®Œæ•´çš„é…ç½®å’Œå®‰è£…æµç¨‹
- âœ… AIæ•…äº‹ç”Ÿæˆçš„ä½¿ç”¨æ–¹æ³•
- âœ… å®Œæ•´æµæ°´çº¿çš„æ“ä½œæŠ€å·§
- âœ… å„ä¸ªæ¨¡å—çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•
- âœ… é«˜çº§åŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§
- âœ… æ–‡ä»¶ç®¡ç†å’Œé¡¹ç›®ç»´æŠ¤ç­–ç•¥

**æ¥ä¸‹æ¥çš„å»ºè®®ï¼š**

1. **å®è·µç»ƒä¹ **ï¼šä»ä¸€ä¸ªç®€å•çš„æ•…äº‹å¼€å§‹ï¼Œé€æ­¥å°è¯•å„ç§åŠŸèƒ½
2. **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®æ‚¨çš„éœ€æ±‚è°ƒæ•´å„ç§å‚æ•°è®¾ç½®
3. **ç¤¾åŒºå‚ä¸**ï¼šåŠ å…¥ç”¨æˆ·ç¤¾åŒºï¼Œåˆ†äº«ç»éªŒå’Œè·å–å¸®åŠ©
4. **æŒç»­å­¦ä¹ **ï¼šå…³æ³¨é¡¹ç›®æ›´æ–°ï¼Œå­¦ä¹ æ–°åŠŸèƒ½å’Œæœ€ä½³å®è·µ

**åˆ›ä½œæ„‰å¿«ï¼** ğŸš€

Story Flowå›¢é˜Ÿè‡´åŠ›äºä¸ºåˆ›ä½œè€…æä¾›æœ€å¥½çš„AIè¾…åŠ©åˆ›ä½œå·¥å…·ã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œæ¬¢è¿éšæ—¶è”ç³»æˆ‘ä»¬ã€‚è®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ æ›´ç²¾å½©çš„æ•…äº‹ä¸–ç•Œï¼

---

*æœ¬æ•™ç¨‹æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´12æœˆ01æ—¥*  
*æ•™ç¨‹ç‰ˆæœ¬ï¼šv2.0*  
*é€‚ç”¨äºStory Flow v2.0.0åŠä»¥ä¸Šç‰ˆæœ¬*